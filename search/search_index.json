{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Streaming Device Firmware","text":"<p>Portable streaming device firmware that connects to a TV via HDMI, streams apps over Wi-Fi, and provides a home page launcher with HDMI-CEC TV control and Bluetooth mobile app support.</p>"},{"location":"#features","title":"Features","text":"Feature Description HDMI Video/audio passthrough to TV (1080p/4K) HDMI-CEC Power, volume, and navigation control of TV Wi-Fi Streaming from Netflix, Prime Video, Hulu, Disney+ Bluetooth A2DP audio, GATT control channel for mobile app Video Codecs H.265, AV1, VP9, MPEG-4, ProRes Containers MP4, MOV, MKV Modular HAL, SOA APIs, swappable drivers"},{"location":"#quick-links","title":"Quick Links","text":"Section Description Quick Start Build and run in minutes Detailed Design Full design: context, HAL, security, compliance Architecture System design and data flows API Reference HAL interfaces and services Testing Test strategy and execution"},{"location":"#project-layout","title":"Project Layout","text":"<pre><code>streamingDevice_HDMI/\n\u251c\u2500\u2500 include/          # Public headers (types, media)\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 hal/          # Hardware Abstraction Layer\n\u2502   \u251c\u2500\u2500 drivers/      # Mock and platform drivers\n\u2502   \u251c\u2500\u2500 services/     # SOA services\n\u2502   \u251c\u2500\u2500 common/       # Event bus, logger\n\u2502   \u2514\u2500\u2500 main.cpp\n\u251c\u2500\u2500 config/           # App configuration\n\u251c\u2500\u2500 tests/            # Unit and integration tests\n\u2514\u2500\u2500 docs/             # Documentation source\n</code></pre>"},{"location":"#build","title":"Build","text":"<pre><code># With Make\nmake all\nmake test\n\n# With CMake\ncmake -B build &amp;&amp; cmake --build build\n./build/streaming_device_tests\n</code></pre>"},{"location":"#documentation-structure","title":"Documentation Structure","text":"<p>This documentation is built with MkDocs Material and includes:</p> <ul> <li>Interactive navigation \u2013 Sidebar and tabs</li> <li>Full-text search \u2013 Across all pages</li> <li>Diagrams \u2013 Mermaid architecture and sequence diagrams</li> <li>Auto-synced \u2013 Diagrams and structure scripts regenerate from source</li> </ul>"},{"location":"#local-preview","title":"Local Preview","text":"<pre><code>pip install mkdocs-material\nmkdocs serve\n# Open http://127.0.0.1:8000\n</code></pre>"},{"location":"#build-static-site","title":"Build Static Site","text":"<pre><code>mkdocs build\n# Output in site/\n</code></pre>"},{"location":"Bluetooth_Control_Protocol/","title":"Bluetooth Control Protocol for Mobile App","text":""},{"location":"Bluetooth_Control_Protocol/#overview","title":"Overview","text":"<p>The streaming device exposes a GATT-based control channel for companion mobile apps. The mobile app can discover, pair, and control the device (navigation, playback, volume, power) over Bluetooth Low Energy (BLE).</p>"},{"location":"Bluetooth_Control_Protocol/#gatt-service-definition","title":"GATT Service Definition","text":""},{"location":"Bluetooth_Control_Protocol/#control-service","title":"Control Service","text":"<ul> <li>UUID: <code>12345678-1234-5678-1234-56789abcdef0</code></li> <li>Purpose: Device control and status</li> </ul>"},{"location":"Bluetooth_Control_Protocol/#characteristics","title":"Characteristics","text":"Characteristic UUID Properties Description Command <code>12345678-1234-5678-1234-56789abcdef1</code> Write Mobile app writes commands here Status <code>12345678-1234-5678-1234-56789abcdef2</code> Read, Notify Device sends status updates"},{"location":"Bluetooth_Control_Protocol/#command-protocol-mobile-device","title":"Command Protocol (Mobile \u2192 Device)","text":"<p>The mobile app writes a single byte to the Command characteristic:</p> Byte Command Action 0x01 NAV_UP Move focus up 0x02 NAV_DOWN Move focus down 0x03 NAV_LEFT Move focus left 0x04 NAV_RIGHT Move focus right 0x05 SELECT Select/OK 0x06 BACK Back 0x07 PLAY Play 0x08 PAUSE Pause 0x09 VOLUME_UP Volume up 0x0A VOLUME_DOWN Volume down 0x0B POWER Power toggle"},{"location":"Bluetooth_Control_Protocol/#status-protocol-device-mobile","title":"Status Protocol (Device \u2192 Mobile)","text":"<p>Device sends status updates via the Status characteristic (notify):</p> <ul> <li>Byte 0: State flags (bit0: playing, bit1: app active, bit2: wifi connected)</li> <li>Byte 1: Current volume 0-100</li> <li>Bytes 2+: Optional JSON or custom payload (e.g., current app ID)</li> </ul>"},{"location":"Bluetooth_Control_Protocol/#pairing-flow","title":"Pairing Flow","text":"<ol> <li>Device enables BLE discoverable mode</li> <li>Mobile app scans for device (advertised name: \"Streaming Device\")</li> <li>Mobile app initiates connection and pairing (BLE secure pairing)</li> <li>Mobile app discovers GATT services and subscribes to Status notifications</li> <li>Mobile app can now write commands to Command characteristic</li> </ol>"},{"location":"Bluetooth_Control_Protocol/#security-requirements","title":"Security Requirements","text":"<ul> <li>Use BLE secure pairing (passkey display or numeric comparison)</li> <li>Authenticate session; reject unpaired writes</li> <li>Optional: encrypt sensitive status data</li> </ul>"},{"location":"Bluetooth_Control_Protocol/#example-mobile-app-flow-pseudocode","title":"Example Mobile App Flow (Pseudocode)","text":"<pre><code>1. BLE scan for \"Streaming Device\"\n2. Connect to device\n3. Pair (secure)\n4. Discover service 12345678-1234-5678-1234-56789abcdef0\n5. Subscribe to Status characteristic notifications\n6. Write 0x05 to Command to simulate \"Select\"\n7. Receive status notification with current state\n</code></pre>"},{"location":"Bluetooth_Control_Protocol/#latency","title":"Latency","text":"<p>Target: &lt; 100ms from write to device action for responsive UX.</p>"},{"location":"Codec_Container_API/","title":"Codec and Container API Reference","text":""},{"location":"Codec_Container_API/#overview","title":"Overview","text":"<p>Hardware-accelerated or software decoders for H.265 (HEVC), AV1, VP9, MPEG-4 Part 2, and ProRes. Container support for .mp4, .mov, .mkv. Modular HAL and SOA architecture.</p>"},{"location":"Codec_Container_API/#codec-hal-icodecdecoder","title":"Codec HAL (ICodecDecoder)","text":"<p>File: <code>src/hal/codec_hal.hpp</code></p>"},{"location":"Codec_Container_API/#interface","title":"Interface","text":"Method Description <code>initialize(codec, track_info)</code> Initialize decoder for codec and format <code>shutdown()</code> Release resources <code>decodeFrame(packet)</code> Decode one encoded packet \u2192 DecodeResult <code>flush()</code> Flush internal buffers <code>drain(callback)</code> Drain remaining frames (EOS) <code>reset()</code> Reset to initial state <code>getCapabilities()</code> CodecCapabilities <code>getError()</code> Last DecodeError <code>setHardwareAcceleration(enabled)</code> HW accel toggle <code>supports(codec)</code> Check codec support"},{"location":"Codec_Container_API/#decoderesult","title":"DecodeResult","text":"<pre><code>struct DecodeResult {\n    device::Result status;\n    media::DecodeError decode_error;\n    bool frame_ready;\n    media::DecodedFrame frame;\n};\n</code></pre>"},{"location":"Codec_Container_API/#supported-codecs","title":"Supported Codecs","text":"<ul> <li>H.265 (HEVC): 4K/HDR, SMPTE ST 2086, HDR10/10+</li> <li>AV1: Royalty-free, streaming, color space</li> <li>VP9: 4K, web-derived streams</li> <li>MPEG-4 Part 2: Legacy, baseline/advanced, error resilience</li> <li>ProRes: High-quality editing; licensing required</li> </ul>"},{"location":"Codec_Container_API/#container-hal-icontainerparser","title":"Container HAL (IContainerParser)","text":"<p>File: <code>src/hal/container_hal.hpp</code></p>"},{"location":"Codec_Container_API/#interface_1","title":"Interface","text":"Method Description <code>openContainer(path_or_uri)</code> Open .mp4, .mov, .mkv <code>readPacket(packet_out)</code> Read next video/audio/subtitle packet <code>seek(timestamp_us)</code> Seek to PTS <code>seekToByte(offset)</code> Seek by byte (progressive) <code>getTracks()</code> All track metadata <code>getVideoTracks()</code> Video only <code>getAudioTracks()</code> Audio only <code>getSubtitleTracks()</code> Subtitles <code>getDurationUs()</code> Container duration <code>closeContainer()</code> Close and release"},{"location":"Codec_Container_API/#track-metadata","title":"Track Metadata","text":"<pre><code>struct TrackMetadata {\n    TrackType type;           // VIDEO, AUDIO, SUBTITLE\n    uint32_t track_id;\n    std::string language;\n    int64_t duration_us;\n    VideoTrackInfo video;     // codec, width, height, frame_rate, HDR\n    AudioTrackInfo audio;     // codec, sample_rate, channels\n    SubtitleTrackInfo subtitle;\n};\n</code></pre>"},{"location":"Codec_Container_API/#hdr-metadata","title":"HDR Metadata","text":"<p>File: <code>include/streaming_device/media_types.hpp</code></p> <pre><code>struct HdrMetadata {\n    ColorPrimaries color_primaries;\n    TransferCharacteristics transfer;\n    MatrixCoefficients matrix;\n    MasteringDisplayInfo mastering_display;  // SMPTE ST 2086\n    ContentLightLevel content_light;         // MaxCLL, MaxFALL\n    bool is_hdr10;\n    bool is_hlg;\n};\n</code></pre>"},{"location":"Codec_Container_API/#video-pipeline-hal-ivideopipeline","title":"Video Pipeline HAL (IVideoPipeline)","text":"<p>File: <code>src/hal/video_pipeline_hal.hpp</code></p> <ul> <li><code>submitFrame(frame, on_present)</code> \u2013 Color convert, HDR, present to compositor</li> <li><code>setOutputColorSpace(primaries, transfer)</code></li> <li><code>setHdrMetadata(metadata)</code> \u2013 HDMI HDR passthrough</li> <li><code>setUpscalingEnabled(enabled)</code></li> </ul>"},{"location":"Codec_Container_API/#drm-hal-idrmhal","title":"DRM HAL (IDrmHal)","text":"<p>File: <code>src/hal/drm_hal.hpp</code></p> <p>Hooks for content protection (Widevine, PlayReady, FairPlay):</p> <ul> <li><code>requestKeys(request, response)</code> \u2013 Secure key retrieval</li> <li><code>releaseSession(session_id)</code></li> <li><code>isContentProtected(init_data)</code></li> </ul>"},{"location":"Codec_Container_API/#codecservice","title":"CodecService","text":"<p>File: <code>src/services/codec_service.hpp</code></p> <ul> <li><code>registerCodec(codec, factory, info)</code> \u2013 Plug-in codecs</li> <li><code>createDecoder(track, prefer_hardware)</code> \u2013 Select best decoder</li> <li><code>getCapabilities(codec)</code></li> <li><code>isSupported(codec)</code></li> </ul>"},{"location":"Codec_Container_API/#containerservice","title":"ContainerService","text":"<p>File: <code>src/services/container_service.hpp</code></p> <ul> <li><code>open(path_or_uri)</code> \u2013 Auto-detect format, init demuxer</li> <li><code>readPacket(packet_out)</code></li> <li><code>seek(timestamp_us)</code></li> <li><code>getTracks()</code>, <code>getDurationUs()</code>, <code>close()</code></li> </ul>"},{"location":"Codec_Container_API/#streampipeline","title":"StreamPipeline","text":"<p>File: <code>src/services/stream_pipeline_service.hpp</code></p> <p>Orchestrates: demux \u2192 decode \u2192 color convert \u2192 HDR \u2192 PTS sync.</p> <ul> <li><code>open(path_or_uri)</code>, <code>play()</code>, <code>pause()</code>, <code>seek()</code>, <code>stop()</code></li> <li><code>setStatusCallback()</code>, <code>setTelemetryCallback()</code> \u2013 Errors, buffer underruns</li> </ul>"},{"location":"Codec_Container_API/#licensing","title":"Licensing","text":"<ul> <li>ProRes: Apple ProRes license required for decode.</li> <li>HEVC/AV1/VP9: Check platform and patent pool requirements.</li> <li>Hardware decoders: SoC-specific; consult vendor docs.</li> </ul>"},{"location":"Detailed_Design_Document/","title":"Detailed Design Document: Portable HDMI Streaming Device","text":"<p>Version: 1.0 Date: February 2025 Status: Final Format: Markdown</p>"},{"location":"Detailed_Design_Document/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Executive Summary</li> <li>System Context</li> <li>Architecture Overview</li> <li>Hardware Abstraction Layer Details</li> <li>Software Architecture and Design</li> <li>Interfaces and API Design</li> <li>Data Flow and Sequence Diagrams</li> <li>Hardware Acceleration and Performance</li> <li>Security and Privacy</li> <li>Compliance and Licensing</li> <li>Platform and Build Environment</li> <li>Testing and Validation</li> <li>Deployment and Operations</li> <li>Documentation and Deliverables</li> <li>Risks and Mitigations</li> <li>Appendix</li> </ol>"},{"location":"Detailed_Design_Document/#1-executive-summary","title":"1. Executive Summary","text":""},{"location":"Detailed_Design_Document/#11-product-overview","title":"1.1 Product Overview","text":"<p>The Portable HDMI Streaming Device is a firmware-driven embedded system that connects to a TV via HDMI. It delivers a home-page launcher for streaming apps (Netflix, Prime Video, Hulu, Disney+), streams content over Wi-Fi, and supports control via remote, HDMI-CEC, and a companion mobile app over Bluetooth.</p>"},{"location":"Detailed_Design_Document/#12-goals","title":"1.2 Goals","text":"Goal Description Simplicity Plug-and-play HDMI connection; minimal user setup Unified Control Single remote for TV and device; CEC integration Streaming Wi-Fi delivery with TLS; multi-codec support Extensibility HAL and SOA architecture; swappable drivers Reliability Graceful error handling; OTA updates"},{"location":"Detailed_Design_Document/#13-target-hardware-platform","title":"1.3 Target Hardware Platform","text":"<ul> <li>SoC: ARM or RISC-V class; target: Cortex-A series or equivalent</li> <li>Memory: 256 MB RAM minimum; 512 MB recommended for 4K</li> <li>Storage: Flash for firmware; persistent config</li> <li>Peripherals: HDMI (1.4+), Wi-Fi, Bluetooth/BLE, IR receiver</li> </ul>"},{"location":"Detailed_Design_Document/#14-key-features","title":"1.4 Key Features","text":"Feature Description HDMI 1080p/4K video and audio passthrough HDMI-CEC Power, volume, navigation control of TV Wi-Fi Client for streaming; TLS for secure delivery Bluetooth A2DP audio; GATT control for mobile app Codecs H.265, AV1, VP9, MPEG-4, ProRes Containers MP4, MOV, MKV DRM HAL hooks for Widevine/PlayReady/FairPlay"},{"location":"Detailed_Design_Document/#15-core-use-cases","title":"1.5 Core Use Cases","text":"<ol> <li>Launch apps from home page \u2013 Navigate with remote, select app icon, launch streaming session</li> <li>HDMI-CEC TV control \u2013 Power on/off TV, volume, navigation passthrough</li> <li>Wi-Fi streaming \u2013 Connect to network, stream from app content servers</li> <li>Bluetooth control \u2013 Pair mobile app, send navigation and playback commands</li> <li>Mobile app integration \u2013 Companion app for discovery, pairing, control</li> </ol>"},{"location":"Detailed_Design_Document/#2-system-context","title":"2. System Context","text":""},{"location":"Detailed_Design_Document/#21-system-context-diagram","title":"2.1 System Context Diagram","text":"<pre><code>flowchart TB\n    subgraph External[\"External Systems\"]\n        User[User]\n        TV[TV / HDMI]\n        WiFi[Wi-Fi Network]\n        App[Bluetooth Mobile App]\n        Services[Streaming Services]\n        DRM[DRM / Licensing]\n    end\n\n    Device[Streaming Device]\n\n    User --&gt;|Remote / IR| Device\n    User --&gt;|Touch| App\n    Device --&gt;|HDMI video/audio, CEC| TV\n    Device --&gt;|TLS streams| WiFi\n    Device &lt;--&gt;|BLE GATT| App\n    Device --&gt;|HTTPS / SDK / APK| Services\n    Device --&gt;|Key provisioning| DRM</code></pre>"},{"location":"Detailed_Design_Document/#22-external-actors-and-systems","title":"2.2 External Actors and Systems","text":"Actor/System Interface Description TV / HDMI HDMI Type A, CEC bus Video/audio output; CEC command exchange Wi-Fi Network 802.11, TLS Stream delivery, OTA updates Bluetooth Devices BLE GATT, A2DP Mobile app control; audio sink Streaming Services HTTPS, SDK/APK Netflix, Prime, Hulu, etc. content delivery DRM / Licensing Vendor APIs Widevine, PlayReady; ProRes, HEVC licensing"},{"location":"Detailed_Design_Document/#23-interfaces-to-external-systems","title":"2.3 Interfaces to External Systems","text":"Interface Protocol Notes HDMI HDMI 1.4/2.0 spec Video, audio, EDID; HDCP when required HDMI-CEC CEC 1.4 User control codes, power, standby Wi-Fi 802.11n/ac, wpa_supplicant TLS for streaming endpoints Bluetooth BLE 4.x+, GATT Custom control service UUID Streaming SDKs HTTPS, vendor APIs App-specific; auth, CDN DRM Vendor-specific Key request/response, license tokens"},{"location":"Detailed_Design_Document/#3-architecture-overview","title":"3. Architecture Overview","text":""},{"location":"Detailed_Design_Document/#31-high-level-architectural-diagram","title":"3.1 High-Level Architectural Diagram","text":"<pre><code>graph TB\n    subgraph Application\n        Main[main.cpp]\n    end\n\n    subgraph Services[\"Core Services (SOA)\"]\n        UI[UI Service]\n        App[App Launcher]\n        Stream[Streaming Service]\n        CEC[HDMI-CEC Service]\n        BT[Bluetooth Control]\n        Config[Config Service]\n        Telemetry[Telemetry Service]\n        Update[Update Service]\n    end\n\n    subgraph HAL[\"Hardware Abstraction Layer\"]\n        Display[Display HAL]\n        Input[Input HAL]\n        WiFi[Wi-Fi HAL]\n        BT_HAL[Bluetooth HAL]\n        CEC_HAL[CEC HAL]\n        Storage[Storage HAL]\n        Power[Power HAL]\n        Codec[Codec HAL]\n        Container[Container HAL]\n        VideoPipe[Video Pipeline HAL]\n        DRM[DRM HAL]\n    end\n\n    subgraph Drivers[\"Platform Drivers\"]\n        Mock[Mock Drivers]\n        Platform[Platform Drivers]\n    end\n\n    Main --&gt; UI\n    Main --&gt; App\n    Main --&gt; Stream\n    Main --&gt; CEC\n    Main --&gt; Config\n    Stream --&gt; Codec\n    Stream --&gt; Container\n    UI --&gt; Display\n    UI --&gt; Input\n    CEC --&gt; CEC_HAL\n    BT --&gt; BT_HAL\n    Config --&gt; Storage\n    Display --&gt; Mock\n    Input --&gt; Mock\n    CEC_HAL --&gt; Mock</code></pre>"},{"location":"Detailed_Design_Document/#32-layer-definitions","title":"3.2 Layer Definitions","text":"Layer Responsibility Application Main loop, input routing, service orchestration Core Services (SOA) UI, app launch, streaming, CEC, config, telemetry, update Hardware Abstraction Layer Abstract interfaces; platform-independent APIs Platform Drivers Mock (test) or real hardware implementations"},{"location":"Detailed_Design_Document/#33-security-and-compliance-layer","title":"3.3 Security and Compliance Layer","text":"<ul> <li>Secure boot \u2013 Verified boot chain (platform-dependent)</li> <li>Code signing \u2013 Firmware signed; OTA verification</li> <li>DRM \u2013 Content protection via IDrmHal; key isolation</li> </ul>"},{"location":"Detailed_Design_Document/#34-drm-content-protection-layer","title":"3.4 DRM / Content Protection Layer","text":"<ul> <li>IDrmHal \u2013 Request keys, release session, content protection check</li> <li>Hooks \u2013 Integrate Widevine, PlayReady, FairPlay</li> <li>Key isolation \u2013 Secure storage; TEE where available</li> </ul>"},{"location":"Detailed_Design_Document/#4-hardware-abstraction-layer-hal-details","title":"4. Hardware Abstraction Layer (HAL) Details","text":""},{"location":"Detailed_Design_Document/#41-hal-domains-and-api-surface","title":"4.1 HAL Domains and API Surface","text":"HAL Interface Key Methods Data Models Display IDisplayHal initialize, setDisplayMode, getFramebuffer, present, clear ResolutionInfo, framebuffer Input IInputHal initialize, poll, injectKey, setInputCallback InputEvent, RemoteKey Wi-Fi IWifiHal connect, disconnect, getState, resolveHost WifiState Bluetooth IBluetoothHal initialize, registerControlService, writeCharacteristic BluetoothState HDMI-CEC IHdmiCecHal sendPowerOn, sendStandby, sendUserControl, sendRemoteKey CecMessage, CecUserControlCode Storage IStorageHal read, write, exists, remove Key-value strings Power IPowerHal sleep, wake, getBatteryLevel - Audio IAudioHal setVolume, mute - Codec ICodecDecoder initialize, decodeFrame, flush, reset DecodedFrame, EncodedPacket Container IContainerParser openContainer, readPacket, seek, getTracks TrackMetadata, EncodedPacket Video Pipeline IVideoPipeline submitFrame, setOutputColorSpace, setHdrMetadata DecodedFrame DRM IDrmHal requestKeys, releaseSession, isContentProtected -"},{"location":"Detailed_Design_Document/#42-error-handling-strategy","title":"4.2 Error Handling Strategy","text":"<ul> <li>Result enum \u2013 <code>device::Result::OK</code>, <code>ERROR_INVALID_PARAM</code>, <code>ERROR_IO</code>, etc.</li> <li>No exceptions \u2013 APIs return Result; callers check and handle</li> <li>Recovery \u2013 State rollback on failure; pipeline flush/reset on decode errors</li> </ul>"},{"location":"Detailed_Design_Document/#43-state-diagrams","title":"4.3 State Diagrams","text":""},{"location":"Detailed_Design_Document/#431-initialization-state","title":"4.3.1 Initialization State","text":"<pre><code>stateDiagram-v2\n    [*] --&gt; Idle\n    Idle --&gt; Initializing : initialize()\n    Initializing --&gt; Ready : OK\n    Initializing --&gt; Error : failure\n    Ready --&gt; [*] : shutdown()\n    Error --&gt; [*] : shutdown()</code></pre>"},{"location":"Detailed_Design_Document/#432-stream-pipeline-state","title":"4.3.2 Stream Pipeline State","text":"<pre><code>stateDiagram-v2\n    [*] --&gt; IDLE\n    IDLE --&gt; OPENING : open()\n    OPENING --&gt; PAUSED : OK\n    OPENING --&gt; ERROR : failure\n    PAUSED --&gt; PLAYING : play()\n    PLAYING --&gt; PAUSED : pause()\n    PAUSED --&gt; SEEKING : seek()\n    PLAYING --&gt; SEEKING : seek()\n    SEEKING --&gt; PAUSED : done (was paused)\n    SEEKING --&gt; PLAYING : done (was playing)\n    SEEKING --&gt; ERROR : seek failure\n    PAUSED --&gt; IDLE : stop()\n    PLAYING --&gt; IDLE : stop()\n    ERROR --&gt; IDLE : stop()</code></pre>"},{"location":"Detailed_Design_Document/#433-power-management","title":"4.3.3 Power Management","text":"<pre><code>stateDiagram-v2\n    [*] --&gt; Active\n    Active --&gt; Standby : sleep()\n    Standby --&gt; Active : wake() / wake-on-remote</code></pre>"},{"location":"Detailed_Design_Document/#5-software-architecture-and-design","title":"5. Software Architecture and Design","text":""},{"location":"Detailed_Design_Document/#51-service-oriented-architecture-soa","title":"5.1 Service-Oriented Architecture (SOA)","text":""},{"location":"Detailed_Design_Document/#511-core-services","title":"5.1.1 Core Services","text":"Service Responsibility Interface UI Service Launcher, home page rendering, navigation IUiService App Launcher App registry, launch, lifecycle IAppLauncherService Streaming Service Pipeline orchestration, session management IStreamingService HDMI-CEC Service Key mapping, CEC command generation IHdmiCecService Bluetooth Control Mobile app command handling IBluetoothControlService Config Service Persistent settings IConfigService Telemetry Logging, metrics ITelemetryService Update OTA workflow IUpdateService"},{"location":"Detailed_Design_Document/#512-inter-service-communication","title":"5.1.2 Inter-Service Communication","text":"Mechanism Usage Event Bus APP_LAUNCHED, APP_STOPPED; decoupled publish/subscribe Synchronous calls Direct service-to-service (e.g., main \u2192 CEC, UI \u2192 launcher) Callbacks Status, telemetry, input events"},{"location":"Detailed_Design_Document/#52-modules-and-responsibilities","title":"5.2 Modules and Responsibilities","text":"Module Responsibility UI Service Focus model, D-pad navigation, accessibility-ready design App Launcher App catalog from config; auth hooks; session lifecycle Streaming Service Pipeline open/play/pause/seek; buffering; error recovery HDMI/CEC Manager RemoteKey \u2192 CecUserControlCode; TV state sync Bluetooth Control GATT Command/Status; pairing; control channel protocol Network/Streaming TLS, content delivery, DRM licensing, QoS Update and Telemetry Secure OTA; log collection; metrics"},{"location":"Detailed_Design_Document/#53-data-models","title":"5.3 Data Models","text":"Model Description AppMetadata id, name, icon_path, package_uri, auth_endpoint TrackMetadata type, track_id, duration, VideoTrackInfo, AudioTrackInfo Streaming session app_id, session_id, state (IDLE/PLAYING/PAUSED) HdrMetadata color primaries, transfer, mastering display, MaxCLL/MaxFALL"},{"location":"Detailed_Design_Document/#6-interfaces-and-api-design","title":"6. Interfaces and API Design","text":""},{"location":"Detailed_Design_Document/#61-codecdecoder-api","title":"6.1 Codec/Decoder API","text":"<p>See Codec_Container_API.md. Key interface: <code>ICodecDecoder</code> with <code>decodeFrame</code>, <code>flush</code>, <code>reset</code>, <code>getCapabilities</code>.</p>"},{"location":"Detailed_Design_Document/#62-containerdemuxer-api","title":"6.2 Container/Demuxer API","text":"<p>See Codec_Container_API.md. Key interface: <code>IContainerParser</code> with <code>openContainer</code>, <code>readPacket</code>, <code>seek</code>, <code>getTracks</code>.</p>"},{"location":"Detailed_Design_Document/#63-remote-control-api","title":"6.3 Remote Control API","text":"<ul> <li>HDMI-CEC pathway: <code>IHdmiCecHal::sendRemoteKey(RemoteKey)</code> \u2192 <code>sendUserControl(CecUserControlCode)</code></li> <li>Bluetooth pathway: GATT Command characteristic; see Bluetooth_Control_Protocol.md</li> </ul>"},{"location":"Detailed_Design_Document/#64-error-handling-and-logging","title":"6.4 Error Handling and Logging","text":"Contract Description Result codes OK, ERROR_*; no exceptions across HAL/service boundary Telemetry hooks setStatusCallback, setTelemetryCallback for pipeline Logging Logger utility; levels: INFO, WARN, ERROR"},{"location":"Detailed_Design_Document/#7-data-flow-and-sequence-diagrams","title":"7. Data Flow and Sequence Diagrams","text":""},{"location":"Detailed_Design_Document/#71-user-flow-power-on-home-page-app-launch-playback","title":"7.1 User Flow: Power On \u2192 Home Page \u2192 App Launch \u2192 Playback","text":"<pre><code>sequenceDiagram\n    participant U as User\n    participant I as Input HAL\n    participant M as Main\n    participant UI as UI Service\n    participant A as App Launcher\n    participant S as Streaming Service\n    participant P as Stream Pipeline\n    participant CEC as HDMI-CEC\n\n    U-&gt;&gt;I: Power on\n    M-&gt;&gt;UI: render()\n    M-&gt;&gt;CEC: powerOnTv()\n    CEC--&gt;&gt;U: TV on\n    U-&gt;&gt;I: OK (Select)\n    I-&gt;&gt;M: Key Event\n    M-&gt;&gt;UI: select()\n    UI-&gt;&gt;A: launch(netflix)\n    A-&gt;&gt;S: startSession(netflix)\n    S-&gt;&gt;P: open() + play()\n    P--&gt;&gt;U: Video on TV</code></pre>"},{"location":"Detailed_Design_Document/#72-remote-navigation-cec-mapping","title":"7.2 Remote Navigation \u2192 CEC Mapping","text":"<pre><code>sequenceDiagram\n    participant R as Remote\n    participant I as Input HAL\n    participant M as Main\n    participant CEC as HDMI-CEC Service\n    participant H as CEC HAL\n    participant T as TV\n\n    R-&gt;&gt;I: Volume Up\n    I-&gt;&gt;M: Key Event\n    M-&gt;&gt;CEC: sendKeyToTv(VOLUME_UP)\n    CEC-&gt;&gt;H: sendUserControl(VOLUME_UP)\n    H-&gt;&gt;T: USER_CONTROL_PRESSED 0x41\n    T--&gt;&gt;R: Volume increases</code></pre>"},{"location":"Detailed_Design_Document/#73-bluetooth-pairing-mobile-app-control","title":"7.3 Bluetooth Pairing \u2192 Mobile App Control","text":"<pre><code>sequenceDiagram\n    participant A as Mobile App\n    participant BLE as Bluetooth HAL\n    participant BT as Bluetooth Control\n    participant M as Main\n    participant UI as UI\n\n    A-&gt;&gt;BLE: Scan, connect, pair\n    A-&gt;&gt;BLE: Subscribe to Status\n    A-&gt;&gt;BLE: Write 0x05 (SELECT)\n    BLE-&gt;&gt;BT: Command callback\n    BT-&gt;&gt;M: Route to UI/Streaming\n    M-&gt;&gt;UI: select()</code></pre>"},{"location":"Detailed_Design_Document/#74-streaming-flow-app-selection-decode-hdmi","title":"7.4 Streaming Flow: App Selection \u2192 Decode \u2192 HDMI","text":"<pre><code>sequenceDiagram\n    participant S as Streaming Service\n    participant P as Stream Pipeline\n    participant C as Container Service\n    participant D as Codec Service\n    participant V as Video Pipeline\n    participant H as Display HAL\n\n    S-&gt;&gt;P: open(path)\n    P-&gt;&gt;C: open()\n    P-&gt;&gt;D: createDecoder(track)\n    S-&gt;&gt;P: play()\n    loop Playback\n        P-&gt;&gt;C: readPacket()\n        C-&gt;&gt;P: EncodedPacket\n        P-&gt;&gt;D: decodeFrame()\n        D-&gt;&gt;P: DecodedFrame\n        P-&gt;&gt;V: submitFrame()\n        V-&gt;&gt;H: present()\n    end</code></pre>"},{"location":"Detailed_Design_Document/#8-hardware-acceleration-and-performance","title":"8. Hardware Acceleration and Performance","text":""},{"location":"Detailed_Design_Document/#81-decoding-strategies","title":"8.1 Decoding Strategies","text":"Strategy Use Case Hardware accelerator Preferred for H.265, AV1, VP9; SoC-specific Software fallback When HW unavailable or format unsupported ICodecDecoder::setHardwareAcceleration Toggle per decoder instance"},{"location":"Detailed_Design_Document/#82-video-pipeline","title":"8.2 Video Pipeline","text":"<ul> <li>Color spaces: BT.709, BT.2020; HDR metadata passthrough</li> <li>HDR: HDR10, HLG; SMPTE ST 2086 mastering display</li> <li>Upscaling: Optional; <code>setUpscalingEnabled</code></li> </ul>"},{"location":"Detailed_Design_Document/#83-power-and-thermal","title":"8.3 Power and Thermal","text":"<ul> <li>Sleep/wake: IPowerHal; wake-on-remote via Input HAL</li> <li>Thermal: Platform-specific; throttling hooks (future)</li> </ul>"},{"location":"Detailed_Design_Document/#84-latency-and-determinism","title":"8.4 Latency and Determinism","text":"Target Value Input-to-action &lt; 200 ms CEC command &lt; 100 ms Frame rate 30/60 Hz Buffering Configurable; underrun recovery"},{"location":"Detailed_Design_Document/#9-security-and-privacy","title":"9. Security and Privacy","text":""},{"location":"Detailed_Design_Document/#91-secure-boot-and-code-signing","title":"9.1 Secure Boot and Code Signing","text":"<ul> <li>Platform-dependent \u2013 Verified boot chain when supported</li> <li>OTA \u2013 Signed update images; verification before apply</li> </ul>"},{"location":"Detailed_Design_Document/#92-secure-ota-update-process","title":"9.2 Secure OTA Update Process","text":"<ol> <li>Check for updates (HTTPS)</li> <li>Download signed image</li> <li>Verify signature</li> <li>Apply; rollback on failure</li> </ol>"},{"location":"Detailed_Design_Document/#93-drm-and-key-management","title":"9.3 DRM and Key Management","text":"<ul> <li>IDrmHal \u2013 Abstract key request/release</li> <li>Key storage \u2013 Secure element or TEE when available</li> </ul>"},{"location":"Detailed_Design_Document/#94-bluetooth-security","title":"9.4 Bluetooth Security","text":"<ul> <li>Pairing \u2013 BLE secure pairing; passkey or numeric comparison</li> <li>Bonding \u2013 Persistent keys</li> </ul>"},{"location":"Detailed_Design_Document/#95-data-handling","title":"9.5 Data Handling","text":"<ul> <li>Logging \u2013 No PII in logs</li> <li>Telemetry \u2013 Opt-in; anonymized</li> <li>Config \u2013 Local storage; no cloud sync by default</li> </ul>"},{"location":"Detailed_Design_Document/#10-compliance-and-licensing","title":"10. Compliance and Licensing","text":""},{"location":"Detailed_Design_Document/#101-standards","title":"10.1 Standards","text":"Standard Application HDMI HDMI Specification HDMI-CEC CEC 1.4 Bluetooth Bluetooth SIG Wi-Fi 802.11, regional regulations"},{"location":"Detailed_Design_Document/#102-drm-and-codec-licensing","title":"10.2 DRM and Codec Licensing","text":"Item Notes ProRes Apple license required HEVC Patent pool; platform vendor typically covers AV1 Royalty-free Widevine/PlayReady Per-vendor terms"},{"location":"Detailed_Design_Document/#103-accessibility-and-localization","title":"10.3 Accessibility and Localization","text":"<ul> <li>Navigation \u2013 D-pad; focus visible</li> <li>Localization \u2013 UI strings; config-driven (future)</li> </ul>"},{"location":"Detailed_Design_Document/#11-platform-and-build-environment","title":"11. Platform and Build Environment","text":""},{"location":"Detailed_Design_Document/#111-target-hardware-specifications","title":"11.1 Target Hardware Specifications","text":"Spec Minimum Recommended SoC Cortex-A class Cortex-A53+ RAM 256 MB 512 MB Flash 64 MB 128 MB HDMI 1.4 2.0"},{"location":"Detailed_Design_Document/#112-toolchain-and-build","title":"11.2 Toolchain and Build","text":"Tool Version Compiler GCC/Clang C++17 Build CMake 3.14+, Make CI GitHub Actions"},{"location":"Detailed_Design_Document/#113-dependency-management","title":"11.3 Dependency Management","text":"<ul> <li>Third-party \u2013 Codec libraries (platform); optional SDKs</li> <li>Internal \u2013 Header-only types; HAL and services in-tree</li> </ul>"},{"location":"Detailed_Design_Document/#114-ci-and-automated-testing","title":"11.4 CI and Automated Testing","text":"<ul> <li>Build \u2013 <code>make all</code> or <code>cmake --build</code></li> <li>Tests \u2013 <code>make test</code>; 44 tests (HAL, services, integration)</li> </ul>"},{"location":"Detailed_Design_Document/#12-testing-and-validation","title":"12. Testing and Validation","text":""},{"location":"Detailed_Design_Document/#121-testing-strategy-by-tier","title":"12.1 Testing Strategy by Tier","text":"Tier Scope Count Unit HAL, mocks Many Service App Launcher, UI, Config, CEC, Codec, Container Medium Integration Full flow (app launch, CEC, Bluetooth) Few"},{"location":"Detailed_Design_Document/#122-test-data","title":"12.2 Test Data","text":"<ul> <li>Reference media \u2013 Licensed samples for ProRes; synthetic for others</li> <li>Edge cases \u2013 No extension, audio-only, corrupt headers</li> </ul> <p>See Test_Suite_Document.md.</p>"},{"location":"Detailed_Design_Document/#13-deployment-and-operations","title":"13. Deployment and Operations","text":""},{"location":"Detailed_Design_Document/#131-release-management","title":"13.1 Release Management","text":"<ul> <li>Versioning \u2013 Semantic versioning (future)</li> <li>Git \u2013 main branch; tags for releases</li> </ul>"},{"location":"Detailed_Design_Document/#132-ota-update-and-rollback","title":"13.2 OTA Update and Rollback","text":"<ul> <li>Workflow \u2013 Download \u2192 verify \u2192 apply</li> <li>Rollback \u2013 A/B slots where supported; fallback to previous image</li> </ul>"},{"location":"Detailed_Design_Document/#133-field-diagnostics","title":"13.3 Field Diagnostics","text":"<ul> <li>Log collection \u2013 Via telemetry or debug port</li> <li>Status \u2013 Pipeline state, CEC presence, WiFi state</li> </ul>"},{"location":"Detailed_Design_Document/#14-documentation-and-deliverables","title":"14. Documentation and Deliverables","text":""},{"location":"Detailed_Design_Document/#141-document-formats","title":"14.1 Document Formats","text":"Format Use Markdown Primary; MkDocs for web site Mermaid Diagrams (architecture, sequence)"},{"location":"Detailed_Design_Document/#142-artifacts","title":"14.2 Artifacts","text":"Artifact Location System architecture Implementation_Document.md, architecture/ API reference api/, Codec_Container_API.md, Bluetooth_Control_Protocol.md Developer guides guides/, development/ Config guide guides/hdmi-setup.md"},{"location":"Detailed_Design_Document/#15-risks-and-mitigations","title":"15. Risks and Mitigations","text":"Risk Mitigation ProRes licensing cost Optional codec; disable if not licensed DRM integration complexity HAL abstraction; vendor-specific drivers CEC interoperability Test on multiple TV brands; fallback to passthrough Supply chain Multi-SoC HAL; swappable drivers Security vulnerability Secure OTA; signed updates"},{"location":"Detailed_Design_Document/#open-questions","title":"Open Questions","text":"<ul> <li>SoC-specific hardware decoder integration</li> <li>Multi-language UI implementation</li> </ul>"},{"location":"Detailed_Design_Document/#16-appendix","title":"16. Appendix","text":""},{"location":"Detailed_Design_Document/#161-glossary","title":"16.1 Glossary","text":"Term Definition HAL Hardware Abstraction Layer SOA Service-Oriented Architecture CEC Consumer Electronics Control (HDMI) GATT Generic Attribute Profile (BLE) DRM Digital Rights Management HDR High Dynamic Range PTS Presentation Time Stamp OTA Over-The-Air"},{"location":"Detailed_Design_Document/#162-acronyms","title":"16.2 Acronyms","text":"Acronym Expansion HDMI High-Definition Multimedia Interface CEC Consumer Electronics Control BLE Bluetooth Low Energy A2DP Advanced Audio Distribution Profile TLS Transport Layer Security HEVC High Efficiency Video Coding AV1 AOMedia Video 1 HDR10 HDR 10-bit"},{"location":"Detailed_Design_Document/#163-data-dictionaries","title":"16.3 Data Dictionaries","text":"<p>See <code>include/streaming_device/types.hpp</code>, <code>include/streaming_device/media_types.hpp</code>.</p>"},{"location":"Detailed_Design_Document/#164-change-history","title":"16.4 Change History","text":"Version Date Changes 1.0 Feb 2025 Initial release <p>Related documents: Implementation_Document.md, Product_Requirements_Document.md, Knowledge_Base.md, Test_Suite_Document.md</p>"},{"location":"Implementation_Document/","title":"Streaming Device Firmware - Implementation Document","text":""},{"location":"Implementation_Document/#1-architecture-overview","title":"1. Architecture Overview","text":""},{"location":"Implementation_Document/#11-high-level-block-diagram","title":"1.1 High-Level Block Diagram","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                           STREAMING DEVICE FIRMWARE                              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510            \u2502\n\u2502  \u2502 UI Service  \u2502  \u2502 App Launcher\u2502  \u2502  Streaming   \u2502  \u2502  HDMI-CEC   \u2502            \u2502\n\u2502  \u2502             \u2502  \u2502   Service   \u2502  \u2502   Service    \u2502  \u2502   Service   \u2502            \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518            \u2502\n\u2502         \u2502                \u2502                \u2502                \u2502                    \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2510            \u2502\n\u2502  \u2502                    Event Bus (Inter-Service Communication)     \u2502            \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518            \u2502\n\u2502         \u2502                \u2502                \u2502                \u2502                    \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2510            \u2502\n\u2502  \u2502                    HARDWARE ABSTRACTION LAYER (HAL)             \u2502            \u2502\n\u2502  \u2502  Display \u2502 Input \u2502 Wi-Fi \u2502 Bluetooth \u2502 HDMI-CEC \u2502 Storage \u2502 Power\u2502            \u2502\n\u2502  \u2502  Codec   \u2502 Container \u2502 Video Pipeline \u2502 DRM \u2502 Audio                          \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518            \u2502\n\u2502         \u2502                \u2502                \u2502                \u2502                    \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2510            \u2502\n\u2502  \u2502                    PLATFORM DRIVERS (Mock / Real)               \u2502            \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502                \u2502                \u2502                \u2502\n         \u25bc                \u25bc                \u25bc                \u25bc\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502  HDMI   \u2502     \u2502   TV     \u2502     \u2502   Wi-Fi  \u2502     \u2502 Bluetooth\u2502\n    \u2502 Display \u2502     \u2502  (CEC)   \u2502     \u2502  Network \u2502     \u2502  Mobile  \u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"Implementation_Document/#12-physical-setup-hdmi-connection-to-tv","title":"1.2 Physical Setup: HDMI Connection to TV","text":""},{"location":"Implementation_Document/#121-visual-reference-connection-diagram","title":"1.2.1 Visual Reference \u2013 Connection Diagram","text":"<pre><code>                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502              YOUR TV                 \u2502\n                    \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n                    \u2502  \u2502     HDMI INPUT PORTS         \u2502   \u2502\n                    \u2502  \u2502   (usually on side or back)   \u2502   \u2502\n                    \u2502  \u2502                              \u2502   \u2502\n                    \u2502  \u2502   [HDMI 1] [HDMI 2] [HDMI 3]  \u2502   \u2502\n                    \u2502  \u2502      \u25b2                        \u2502   \u2502\n                    \u2502  \u2502      \u2502                        \u2502   \u2502\n                    \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502   HDMI CABLE      \u2502\n                    \u2502   (Type A)        \u2502\n                    \u2502   \u25c4\u2550\u2550\u2550 19 pins    \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502         STREAMING DEVICE                   \u2502\n                    \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n                    \u2502  \u2502  HDMI OUT port (female)              \u2502  \u2502\n                    \u2502  \u2502  \u25b6 Connect cable HERE                \u2502  \u2502\n                    \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n                    \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2510                \u2502\n                    \u2502  \u2502 USB \u2502  \u2502 DC  \u2502  \u2502 ... \u2502  (power, etc)  \u2502\n                    \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2518                \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"Implementation_Document/#122-step-by-step-hdmi-connection-instructions","title":"1.2.2 Step-by-Step HDMI Connection Instructions","text":"Step Action Details 1 Power off Turn off the TV and streaming device before connecting. 2 Locate HDMI port on TV Find an HDMI input (HDMI 1, 2, 3, etc.) on the side or back panel. 3 Locate HDMI port on device On the streaming device, find the HDMI OUT (or \"HDMI\" labeled) port. 4 Connect HDMI cable Insert one end into the TV\u2019s HDMI input; insert the other end into the device\u2019s HDMI OUT. Ensure the connector is fully seated. 5 Connect power Plug the streaming device into power (USB or DC). 6 Power on Turn on the TV first, then the streaming device. 7 Select HDMI input On the TV remote, choose the HDMI input you used (e.g., HDMI 1). 8 Enable CEC (optional) In TV settings, enable HDMI-CEC (often named Anynet+, Bravia Sync, Simplink, etc.)."},{"location":"Implementation_Document/#123-cabling-reference","title":"1.2.3 Cabling Reference","text":"Cable Type Use Case Notes HDMI Type A (Standard) Device \u2194 TV 19 pins; common for consumer gear HDMI 1.4+ 1080p, 3D Minimum for 1080p HDMI 2.0+ 4K @ 60Hz, HDR Recommended for 4K streaming Max length Run length Use active or fiber cables for runs &gt;10 m"},{"location":"Implementation_Document/#13-interface-architecture-diagram","title":"1.3 Interface Architecture Diagram","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        INTERFACE BOUNDARIES (SOA)                                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                                  \u2502\n\u2502   APPLICATION (main.cpp)                                                         \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502   \u2502  Uses: IUiService, IAppLauncherService, IStreamingService, IHdmiCecService \u2502  \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502                                        \u2502                                         \u2502\n\u2502                                        \u25bc                                         \u2502\n\u2502   SERVICE INTERFACES (Pure Virtual / Abstract)                                    \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502   \u2502 IUiService  \u2502IAppLauncher \u2502IStreaming   \u2502IHdmiCec     \u2502ICodecService     \u2502   \u2502\n\u2502   \u2502             \u2502Service      \u2502Service      \u2502Service      \u2502IContainerService \u2502   \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502          \u2502             \u2502             \u2502             \u2502               \u2502             \u2502\n\u2502          \u25bc             \u25bc             \u25bc             \u25bc               \u25bc             \u2502\n\u2502   HAL INTERFACES (Pure Virtual)                                                   \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502   \u2502IDisplayHal  \u2502IInputHal    \u2502IHdmiCecHal  \u2502ICodecDecoder\u2502IContainerParser \u2502   \u2502\n\u2502   \u2502IWifiHal     \u2502IBluetoothHal\u2502IStorageHal  \u2502IVideoPipeline\u2502IDrmHal          \u2502   \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502          \u2502             \u2502             \u2502             \u2502               \u2502             \u2502\n\u2502          \u25bc             \u25bc             \u25bc             \u25bc               \u25bc             \u2502\n\u2502   IMPLEMENTATIONS (Drivers / Mocks)                                                \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502   \u2502MockDisplay  \u2502MockInput   \u2502MockHdmiCec  \u2502MockCodec    \u2502MockContainer    \u2502   \u2502\n\u2502   \u2502PlatformDisp \u2502PlatformIn  \u2502PlatformCEC  \u2502Decoder      \u2502Parser           \u2502   \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"Implementation_Document/#14-media-pipeline-block-diagram","title":"1.4 Media Pipeline Block Diagram","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        STREAMING MEDIA PIPELINE                                    \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                                   \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502\n\u2502   \u2502  Container  \u2502    \u2502   Codec     \u2502    \u2502   Video     \u2502    \u2502  Display    \u2502      \u2502\n\u2502   \u2502  Service    \u2502\u2500\u2500\u2500\u25b6\u2502  Service   \u2502\u2500\u2500\u2500\u25b6\u2502  Pipeline   \u2502\u2500\u2500\u2500\u25b6\u2502  HAL        \u2502      \u2502\n\u2502   \u2502  (Demux)    \u2502    \u2502  (Decode)   \u2502    \u2502  (Color/HDR)\u2502    \u2502  (HDMI Out) \u2502      \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502\n\u2502          \u2502                  \u2502                  \u2502                  \u2502              \u2502\n\u2502          \u2502  .mp4/.mov/.mkv  \u2502  Raw frames      \u2502  RGBA + HDR      \u2502  Framebuffer \u2502\n\u2502          \u2502  EncodedPacket   \u2502  DecodedFrame    \u2502  metadata        \u2502  HDMI signal \u2502\n\u2502          \u2502                  \u2502                  \u2502                  \u2502              \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502\n\u2502   \u2502IContainer   \u2502    \u2502ICodecDecoder\u2502    \u2502IVideoPipeline\u2502    \u2502  TV Display \u2502      \u2502\n\u2502   \u2502Parser       \u2502    \u2502 H.265/AV1/  \u2502    \u2502 Color space \u2502    \u2502             \u2502      \u2502\n\u2502   \u2502             \u2502    \u2502 VP9/MPEG-4  \u2502    \u2502 HDR metadata\u2502    \u2502             \u2502      \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502\n\u2502                                                                                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"Implementation_Document/#15-layered-architecture-diagram-mermaid","title":"1.5 Layered Architecture Diagram (Mermaid)","text":"<pre><code>graph TB\n    subgraph Application[\"Application Layer\"]\n        Main[main.cpp]\n    end\n\n    subgraph Services[\"Service Layer (SOA)\"]\n        UI[UI Service]\n        AppLauncher[App Launcher Service]\n        Streaming[Streaming Service]\n        Codec[Codec Service]\n        Container[Container Service]\n        Pipeline[Stream Pipeline]\n        CEC[HDMI-CEC Service]\n        BT[Bluetooth Control Service]\n        Config[Config Service]\n        Telemetry[Telemetry Service]\n        Update[Update Service]\n    end\n\n    subgraph Common[\"Common\"]\n        EventBus[Event Bus]\n        Logger[Logger]\n    end\n\n    subgraph HAL[\"Hardware Abstraction Layer\"]\n        DisplayHAL[Display HAL]\n        InputHAL[Input HAL]\n        WifiHAL[Wi-Fi HAL]\n        BTHAL[Bluetooth HAL]\n        CECHAL[HDMI-CEC HAL]\n        StorageHAL[Storage HAL]\n        PowerHAL[Power HAL]\n        AudioHAL[Audio HAL]\n        CodecHAL[Codec HAL]\n        ContainerHAL[Container HAL]\n        VideoPipelineHAL[Video Pipeline HAL]\n    end\n\n    subgraph Drivers[\"Platform Drivers\"]\n        MockDrivers[Mock Drivers]\n        PlatformDrivers[Platform Drivers]\n    end\n\n    Main --&gt; UI\n    Main --&gt; AppLauncher\n    Main --&gt; Streaming\n    Main --&gt; CEC\n    Main --&gt; Config\n    Streaming --&gt; Pipeline\n    Pipeline --&gt; Codec\n    Pipeline --&gt; Container\n    UI --&gt; EventBus\n    AppLauncher --&gt; EventBus\n    CEC --&gt; CECHAL\n    BT --&gt; BTHAL\n    Config --&gt; StorageHAL\n    UI --&gt; DisplayHAL\n    UI --&gt; InputHAL\n    DisplayHAL --&gt; MockDrivers\n    InputHAL --&gt; MockDrivers\n    CECHAL --&gt; MockDrivers</code></pre>"},{"location":"Implementation_Document/#16-data-flow-app-launch-sequence","title":"1.6 Data Flow - App Launch Sequence","text":"<pre><code>sequenceDiagram\n    participant User\n    participant Input as Input HAL\n    participant UI as UI Service\n    participant AppLaunch as App Launcher\n    participant EventBus as Event Bus\n    participant Streaming as Streaming Service\n    participant CEC as HDMI-CEC Service\n\n    User-&gt;&gt;Input: Remote Key (OK)\n    Input-&gt;&gt;UI: Key Event\n    UI-&gt;&gt;UI: select()\n    UI-&gt;&gt;AppLaunch: launch(focused_app_id)\n    AppLaunch-&gt;&gt;EventBus: publish(APP_LAUNCHED)\n    AppLaunch-&gt;&gt;Streaming: startSession()\n    Streaming-&gt;&gt;Streaming: Buffer &amp; Play\n    EventBus-&gt;&gt;CEC: (optional) relay to TV</code></pre>"},{"location":"Implementation_Document/#17-hdmi-cec-command-mapping","title":"1.7 HDMI-CEC Command Mapping","text":"<pre><code>flowchart LR\n    subgraph Input[\"Remote/Bluetooth Input\"]\n        RC[Remote Control]\n        BT[Bluetooth Mobile]\n    end\n\n    subgraph CECService[\"HDMI-CEC Service\"]\n        Map[Key Mapping Table]\n        Queue[Command Queue]\n    end\n\n    subgraph CEC[\"CEC HAL\"]\n        Send[sendRemoteKey]\n        Power[sendPowerOn/Standby]\n    end\n\n    subgraph TV[\"TV\"]\n        TVCtrl[TV Control]\n    end\n\n    RC --&gt; Map\n    BT --&gt; Map\n    Map --&gt; Queue\n    Queue --&gt; Send\n    Queue --&gt; Power\n    Send --&gt; TVCtrl\n    Power --&gt; TVCtrl</code></pre>"},{"location":"Implementation_Document/#18-key-mapping-table-remote-cec","title":"1.8 Key Mapping Table (Remote \u2192 CEC)","text":"Remote Key CEC Opcode CEC User Control POWER Image View On / Standby - UP User Control Pressed 0x01 DOWN User Control Pressed 0x02 LEFT User Control Pressed 0x03 RIGHT User Control Pressed 0x04 OK User Control Pressed 0x00 (Select) BACK User Control Pressed 0x0D VOLUME_UP User Control Pressed 0x41 VOLUME_DOWN User Control Pressed 0x42 MUTE User Control Pressed 0x43"},{"location":"Implementation_Document/#2-module-descriptions","title":"2. Module Descriptions","text":""},{"location":"Implementation_Document/#21-hal-interfaces","title":"2.1 HAL Interfaces","text":"HAL Interface Purpose Display IDisplayHal Framebuffer, present, resolution Input IInputHal Remote/IR/touch events Wi-Fi IWifiHal Connect, scan, DNS Bluetooth IBluetoothHal A2DP, GATT control service HDMI-CEC IHdmiCecHal CEC commands to TV Storage IStorageHal Key-value persistence Power IPowerHal Sleep, wake, battery Audio IAudioHal HDMI/A2DP audio output Codec ICodecDecoder H.265, AV1, VP9, MPEG-4, ProRes Container IContainerParser MP4, MOV, MKV demux Video Pipeline IVideoPipeline Color convert, HDR, compositor DRM IDrmHal Content protection hooks"},{"location":"Implementation_Document/#22-service-dependencies","title":"2.2 Service Dependencies","text":"Service Depends On UI Service Display HAL, Input HAL App Launcher Event Bus Streaming Service StreamPipeline, CodecService, ContainerService StreamPipeline CodecService, ContainerService, Video Pipeline HAL CodecService Codec HAL (decoder factories) ContainerService Container HAL (demuxer) HDMI-CEC Service HDMI-CEC HAL Bluetooth Control Bluetooth HAL Config Service Storage HAL"},{"location":"Implementation_Document/#3-build-and-deployment","title":"3. Build and Deployment","text":"<ul> <li>Build: <code>cmake -B build &amp;&amp; cmake --build build</code> or <code>make all</code></li> <li>Tests: <code>cd build &amp;&amp; ctest</code> or <code>make test</code></li> <li>Run: <code>./build/streaming_device</code> or <code>make run</code></li> </ul>"},{"location":"Implementation_Document/#4-extensibility","title":"4. Extensibility","text":"<ul> <li>New apps: Add to <code>config/apps.json</code> and register via App Launcher</li> <li>New HAL: Implement interface, add to factory</li> <li>New platform: Add platform driver, select via CMake option</li> </ul>"},{"location":"Implementation_Document/#5-related-documents","title":"5. Related Documents","text":"<ul> <li>Detailed_Design_Document.md \u2013 Comprehensive design (system context, HAL details, security, compliance, risks)</li> </ul>"},{"location":"Knowledge_Base/","title":"Streaming Device Firmware - Knowledge Base","text":"<p>Audience: Test teams, Product teams, Developers Purpose: Reference for understanding implementation, architecture, and behavior</p>"},{"location":"Knowledge_Base/#1-product-overview","title":"1. Product Overview","text":""},{"location":"Knowledge_Base/#11-what-is-it","title":"1.1 What Is It?","text":"<p>A portable streaming device that: - Connects to a TV via HDMI (video/audio passthrough) - Uses HDMI-CEC to control the TV (power, volume, navigation) - Streams content from apps (Netflix, Prime, Hulu, Disney+, etc.) over Wi-Fi - Provides a home page UI with app icons for launching - Supports Bluetooth for audio (A2DP) and mobile app control - Decodes H.265, AV1, VP9, MPEG-4, ProRes in MP4/MOV/MKV containers</p>"},{"location":"Knowledge_Base/#12-key-user-flows","title":"1.2 Key User Flows","text":"<ol> <li>Power on \u2192 Device powers TV via CEC, shows home page</li> <li>Select app \u2192 Navigate with remote, press OK \u2192 App launches and streams</li> <li>Volume \u2192 Remote volume up/down \u2192 CEC sends to TV</li> <li>Back \u2192 Exit app, return to home</li> <li>Mobile control \u2192 Pair phone, use app to navigate/play/pause</li> </ol>"},{"location":"Knowledge_Base/#2-physical-setup-connecting-to-tv-via-hdmi","title":"2. Physical Setup: Connecting to TV via HDMI","text":""},{"location":"Knowledge_Base/#21-visual-connection-diagram","title":"2.1 Visual Connection Diagram","text":"<pre><code>    TV                                    STREAMING DEVICE\n    \u2550\u2550                                    \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         \u2502              \u2502                         \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502              \u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502   \u2502 HDMI 1  HDMI 2   \u2502   \u2502    HDMI      \u2502   \u2502   HDMI OUT       \u2502  \u2502\n\u2502   \u2502   \u25cf       \u25cf      \u2502\u25c0\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500CABLE\u2500\u2500\u2500\u253c\u2500\u2500\u25b6\u2502   \u25cf              \u2502  \u2502\n\u2502   \u2502                 \u2502   \u2502    (Type A)   \u2502   \u2502                  \u2502  \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502              \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502         TV INPUT        \u2502              \u2502   Power: USB / DC        \u2502\n\u2502                         \u2502              \u2502                         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n    \u25b2                                          \u25b2\n    \u2502                                          \u2502\n Connect HDMI cable                     Connect power\n to any HDMI input                      cable\n</code></pre>"},{"location":"Knowledge_Base/#22-step-by-step-setup-instructions","title":"2.2 Step-by-Step Setup Instructions","text":"# Step Instructions 1 Power off Turn off both the TV and the streaming device. 2 Find TV HDMI port Locate an HDMI input on the TV (side or back). Label: HDMI 1, HDMI 2, etc. 3 Find device HDMI port On the streaming device, find the HDMI OUT port. Do not use USB or other ports. 4 Connect HDMI cable Insert one end into the TV's HDMI input. Insert the other into the device's HDMI OUT. Push firmly until fully seated. 5 Connect power Plug the streaming device power supply (USB or DC) into a power outlet. 6 Power on TV Turn on the TV first. 7 Power on device Turn on the streaming device. The TV may auto-detect it. 8 Select HDMI input Use the TV remote to select the HDMI input you used (e.g., \"HDMI 1\"). 9 Enable CEC (recommended) In TV settings, enable HDMI-CEC (Anynet+, Bravia Sync, Simplink, etc.) so the remote can control the TV. 10 Connect Wi-Fi Use device settings to connect to your home Wi-Fi for streaming."},{"location":"Knowledge_Base/#23-hdmi-cable-reference","title":"2.3 HDMI Cable Reference","text":"Spec Description Connector HDMI Type A (standard 19-pin) Resolution HDMI 1.4: up to 1080p; HDMI 2.0+: 4K, HDR Length Standard cables: up to ~5 m; longer runs: use active or fiber HDMI Direction Use the port labeled HDMI OUT on the device; IN on the TV"},{"location":"Knowledge_Base/#24-troubleshooting-connection","title":"2.4 Troubleshooting Connection","text":"Issue Possible Cause Solution No picture Wrong HDMI input Select correct HDMI input on TV No picture Cable not seated Unplug and firmly reconnect both ends No picture HDCP mismatch Try another HDMI port or cable No CEC control CEC disabled Enable CEC in TV settings Black screen Resolution mismatch Check device output resolution (1080p/4K)"},{"location":"Knowledge_Base/#3-architecture-for-testproduct-teams","title":"3. Architecture (For Test/Product Teams)","text":""},{"location":"Knowledge_Base/#31-three-main-layers","title":"3.1 Three Main Layers","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  SERVICES (UI, App Launcher, etc.)    \u2502  \u2190 Business logic\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  HAL (Hardware Abstraction)           \u2502  \u2190 Interfaces to hardware\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  DRIVERS (Mock or Real hardware)      \u2502  \u2190 Actual hardware access\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Why this split? - Services can be tested without real hardware (using mocks) - Replacing hardware (e.g., different SoC) only requires new drivers behind the same HAL</p>"},{"location":"Knowledge_Base/#32-system-block-diagram","title":"3.2 System Block Diagram","text":"<pre><code>                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502   Main Loop     \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                             \u2502\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502                       \u2502                       \u2502\n     \u25bc                       \u25bc                       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   UI    \u2502           \u2502 App Launcher\u2502          \u2502 HDMI-CEC\u2502\n\u2502 Service \u2502           \u2502   Service   \u2502          \u2502 Service \u2502\n\u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518\n     \u2502                       \u2502                      \u2502\n     \u2502    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n     \u2502    \u2502                  \u2502                      \u2502\n     \u25bc    \u25bc                  \u25bc                      \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Display HAL \u2502        \u2502 Streaming  \u2502         \u2502 CEC HAL   \u2502\n\u2502 Input HAL   \u2502        \u2502 Service    \u2502         \u2502           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2514\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n     \u2502                        \u2502\n     \u2502                        \u25bc\n     \u2502                 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502                 \u2502 Codec Svc  \u2502\n     \u2502                 \u2502 Container  \u2502\n     \u2502                 \u2502 Pipeline   \u2502\n     \u2502                 \u2514\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n     \u2502                       \u2502\n     \u2502                 \u250c\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502                 \u2502 Wi-Fi HAL \u2502\n     \u2502                 \u2502 Audio HAL \u2502\n     \u2502                 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n     \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 TV / HDMI  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"Knowledge_Base/#33-media-pipeline-flow","title":"3.3 Media Pipeline Flow","text":"<pre><code>  Network/File\n       \u2502\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     EncodedPacket      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Container   \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6  \u2502    Codec     \u2502\n\u2502  Service     \u2502  (H.265, AV1, etc.)   \u2502   Service    \u2502\n\u2502  (Demux)     \u2502                       \u2502   (Decode)   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502                                      \u2502 DecodedFrame\n       \u2502 getTracks()                          \u25bc\n       \u2502                              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n       \u2502                              \u2502   Video      \u2502\n       \u2502                              \u2502   Pipeline   \u2502\n       \u2502                              \u2502 (Color, HDR) \u2502\n       \u2502                              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502                                     \u2502\n       \u2502                                     \u25bc\n       \u2502                              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n       \u2502                              \u2502  Display HAL \u2502\n       \u2502                              \u2502  \u2192 HDMI OUT  \u2502\n       \u2502                              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"Knowledge_Base/#34-interface-dependency-diagram","title":"3.4 Interface Dependency Diagram","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     WHO CALLS WHOM                                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                  \u2502\n\u2502  main.cpp                                                        \u2502\n\u2502     \u2502                                                            \u2502\n\u2502     \u251c\u2500\u2500\u25b6 IUiService          \u2500\u2500\u25b6 IDisplayHal, IInputHal          \u2502\n\u2502     \u251c\u2500\u2500\u25b6 IAppLauncherService \u2500\u2500\u25b6 EventBus                         \u2502\n\u2502     \u251c\u2500\u2500\u25b6 IStreamingService   \u2500\u2500\u25b6 IStreamPipeline                  \u2502\n\u2502     \u251c\u2500\u2500\u25b6 IHdmiCecService     \u2500\u2500\u25b6 IHdmiCecHal                     \u2502\n\u2502     \u2514\u2500\u2500\u25b6 IConfigService      \u2500\u2500\u25b6 IStorageHal                     \u2502\n\u2502                                                                  \u2502\n\u2502  IStreamPipeline                                                 \u2502\n\u2502     \u251c\u2500\u2500\u25b6 ICodecService       \u2500\u2500\u25b6 ICodecDecoder                    \u2502\n\u2502     \u251c\u2500\u2500\u25b6 IContainerService   \u2500\u2500\u25b6 IContainerParser                 \u2502\n\u2502     \u2514\u2500\u2500\u25b6 IVideoPipeline     \u2500\u2500\u25b6 (optional) compositor            \u2502\n\u2502                                                                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"Knowledge_Base/#35-event-flow-input-action","title":"3.5 Event Flow (Input \u2192 Action)","text":"<pre><code>Remote Key Press\n      \u2502\n      \u25bc\nInput HAL (receives key)\n      \u2502\n      \u25bc\nMain loop routes to:\n  - UI Service (navigation: up/down/left/right, select, back)\n  - HDMI-CEC Service (forward to TV: volume, power, navigation)\n  - App Launcher (select \u2192 launch app)\n  - Streaming Service (launch \u2192 start stream)\n</code></pre>"},{"location":"Knowledge_Base/#4-services-what-each-does","title":"4. Services (What Each Does)","text":"Service Role Test-Relevant Behavior UI Service Renders home page, handles focus, navigation setAppIcons, navigate, select, getFocusedElementId App Launcher Registers apps, launches by ID, session management registerApp, launch, stop, getCurrentSessionId Streaming Service Starts/stops stream sessions, quality, pause/resume startSession, stopSession, getState Codec Service Registers decoders, selects best for track registerCodec, createDecoder, getCapabilities Container Service Demuxes MP4/MOV/MKV, provides tracks open, readPacket, getTracks, seek Stream Pipeline Demux \u2192 decode \u2192 color \u2192 HDR \u2192 output open, play, pause, seek, stop HDMI-CEC Service Sends CEC commands to TV sendKeyToTv, powerOnTv, standbyTv Bluetooth Control Receives commands from mobile app setCommandCallback, sendStatus Config Service Persistent settings getString/setString, getInt/setInt Telemetry Logging logEvent, logError Update OTA updates checkForUpdates, downloadAndApply"},{"location":"Knowledge_Base/#5-hal-interfaces-for-testproduct","title":"5. HAL Interfaces (For Test/Product)","text":""},{"location":"Knowledge_Base/#51-display-hal","title":"5.1 Display HAL","text":"<ul> <li>Purpose: Output video to HDMI</li> <li>Key: initialize, setDisplayMode, getFramebuffer, present</li> </ul>"},{"location":"Knowledge_Base/#52-input-hal","title":"5.2 Input HAL","text":"<ul> <li>Purpose: Remote control, IR, touch</li> <li>Key: setInputCallback, poll, injectKey (mock)</li> </ul>"},{"location":"Knowledge_Base/#53-wi-fi-hal","title":"5.3 Wi-Fi HAL","text":"<ul> <li>Purpose: Network for streaming</li> <li>Key: connect, disconnect, getState, resolveHost</li> </ul>"},{"location":"Knowledge_Base/#54-bluetooth-hal","title":"5.4 Bluetooth HAL","text":"<ul> <li>Purpose: A2DP audio, GATT control channel</li> <li>Key: registerControlService, writeCharacteristic, setGattWriteCallback</li> </ul>"},{"location":"Knowledge_Base/#55-hdmi-cec-hal","title":"5.5 HDMI-CEC HAL","text":"<ul> <li>Purpose: Send commands to TV</li> <li>Key: sendPowerOn, sendStandby, sendRemoteKey</li> </ul>"},{"location":"Knowledge_Base/#56-storage-hal","title":"5.6 Storage HAL","text":"<ul> <li>Purpose: Save settings, config</li> <li>Key: read, write, exists, remove</li> </ul>"},{"location":"Knowledge_Base/#57-codec-hal","title":"5.7 Codec HAL","text":"<ul> <li>Purpose: Decode H.265, AV1, VP9, MPEG-4, ProRes</li> <li>Key: initialize, decodeFrame, flush, reset, getCapabilities</li> </ul>"},{"location":"Knowledge_Base/#58-container-hal","title":"5.8 Container HAL","text":"<ul> <li>Purpose: Demux MP4, MOV, MKV</li> <li>Key: openContainer, readPacket, seek, getTracks</li> </ul>"},{"location":"Knowledge_Base/#6-remote-key-and-cec-mapping","title":"6. Remote Key and CEC Mapping","text":"Remote Key Device Action CEC to TV UP Move focus up Send CEC Up DOWN Move focus down Send CEC Down LEFT Move focus left Send CEC Left RIGHT Move focus right Send CEC Right OK Select app / Confirm Send CEC Select BACK Exit app / Go back Send CEC Back VOLUME_UP - Send CEC Volume Up VOLUME_DOWN - Send CEC Volume Down POWER - Send CEC Standby (or Power On)"},{"location":"Knowledge_Base/#7-bluetooth-mobile-app-protocol","title":"7. Bluetooth Mobile App Protocol","text":"<ul> <li>Discovery: BLE scan for \"Streaming Device\"</li> <li>Pairing: Secure BLE pairing</li> <li>Control: Write 1 byte to Command characteristic (see Bluetooth_Control_Protocol.md)</li> <li>Status: Subscribe to Status characteristic for device state</li> </ul>"},{"location":"Knowledge_Base/#8-configuration","title":"8. Configuration","text":"<ul> <li>App list: <code>config/apps.json</code> defines available streaming apps</li> <li>Settings: Stored via Config Service (backed by Storage HAL)</li> </ul>"},{"location":"Knowledge_Base/#9-build-and-run","title":"9. Build and Run","text":"<pre><code># With Make\nmake all\nmake test\nmake run\n\n# With CMake\ncmake -B build\ncmake --build build\n./build/streaming_device\n</code></pre> <p>Tests: <pre><code>make test\n# or: cd build &amp;&amp; ctest\n</code></pre></p>"},{"location":"Knowledge_Base/#10-document-cross-reference","title":"10. Document Cross-Reference","text":"Document Contents Detailed_Design_Document.md Full design: system context, HAL details, security, compliance, risks Implementation_Document.md Full architecture, interface diagrams, HDMI setup, media pipeline Test_Suite_Document.md Test cases, test architecture, execution Codec_Container_API.md Codec and container API reference Bluetooth_Control_Protocol.md Mobile app GATT protocol"},{"location":"Product_Requirements_Document/","title":"Product Requirements Document (PRD)","text":""},{"location":"Product_Requirements_Document/#streaming-device-hdmi-tv-streaming-companion","title":"Streaming Device \u2013 HDMI TV Streaming Companion","text":"<p>Version: 1.0 Date: February 2025 Product: Portable streaming device for TV via HDMI</p>"},{"location":"Product_Requirements_Document/#1-executive-summary","title":"1. Executive Summary","text":"<p>The Streaming Device is a portable firmware-driven device that connects to a TV via HDMI. It provides a home-page launcher for streaming apps (Netflix, Prime Video, Hulu, Disney+, etc.), streams content over Wi-Fi, and allows control via remote, HDMI-CEC, and a companion mobile app over Bluetooth. The device supports multiple video codecs (H.265, AV1, VP9, MPEG-4, ProRes) and container formats (MP4, MOV, MKV).</p>"},{"location":"Product_Requirements_Document/#2-product-vision","title":"2. Product Vision","text":"<p>Enable users to stream subscription and on-demand content from popular apps to their TV with a simple HDMI connection, unified remote control, and optional mobile app control.</p>"},{"location":"Product_Requirements_Document/#3-target-users","title":"3. Target Users","text":"Segment Description Primary Households with Smart TVs or legacy TVs; users wanting streaming without built-in apps Secondary Travelers wanting a portable streaming solution for hotel/Airbnb TVs Tertiary Users preferring a dedicated device over TV built-in apps"},{"location":"Product_Requirements_Document/#4-goals-and-success-criteria","title":"4. Goals and Success Criteria","text":"Goal Success Metric Reliable playback &gt;99% successful playback sessions Responsive UI &lt;200 ms input-to-response latency Easy setup &lt;5 minutes from unboxing to first stream Broad compatibility Support 1080p and 4K on HDMI 1.4+ TVs"},{"location":"Product_Requirements_Document/#5-functional-requirements-high-level","title":"5. Functional Requirements (High Level)","text":"<ul> <li>HDMI video/audio output to TV</li> <li>HDMI-CEC for TV control (power, volume, navigation)</li> <li>Wi-Fi client for streaming</li> <li>Home page launcher with app icons</li> <li>App launch and session management</li> <li>Remote control input (IR/Bluetooth remote)</li> <li>Bluetooth A2DP for audio and mobile app control</li> <li>Multi-codec support (H.265, AV1, VP9, MPEG-4, ProRes)</li> <li>Container support (MP4, MOV, MKV)</li> <li>Secure pairing and TLS for network streams</li> <li>OTA update capability</li> <li>Persistent configuration and preferences</li> </ul>"},{"location":"Product_Requirements_Document/#6-user-stories","title":"6. User Stories","text":""},{"location":"Product_Requirements_Document/#61-user-stories-table","title":"6.1 User Stories Table","text":"ID User Story Acceptance Criteria Priority Epic / Category US-001 As a user, I want to connect the streaming device to my TV via HDMI so that I can view content on my TV screen. Device connects via HDMI; video and audio appear on TV; resolution auto-detected or configurable (1080p/4K). P0 Setup US-002 As a user, I want to power on the device and have it turn on my TV automatically so that I don't need separate remotes. HDMI-CEC powers TV; TV switches to correct HDMI input when device powers on. P0 HDMI-CEC US-003 As a user, I want to control TV volume with my remote so that I can adjust sound without the TV remote. Volume up/down on remote changes TV volume via CEC. P0 HDMI-CEC US-004 As a user, I want to see a home page with streaming app icons so that I can quickly choose what to watch. Home page displays Netflix, Prime, Hulu, Disney+, etc.; icons are clear and labeled. P0 UI US-005 As a user, I want to navigate the home page with Up/Down/Left/Right and Select so that I can highlight and launch apps. Arrow keys move focus; Select launches the focused app; focus is visible. P0 UI US-006 As a user, I want to launch Netflix (or another app) from the home page so that I can stream content. Selecting Netflix launches the app; streaming session starts; content plays. P0 App Launch US-007 As a user, I want to press Back to exit an app and return to the home page so that I can switch apps. Back exits current app; returns to home page; session is stopped cleanly. P0 App Launch US-008 As a user, I want to connect the device to my home Wi-Fi so that I can stream content. Device connects to Wi-Fi; SSID and password supported; connection status visible. P0 Connectivity US-009 As a user, I want the device to play H.265/HEVC video so that I can watch 4K and HDR content. HEVC-encoded streams decode and display correctly; HDR metadata passed when supported. P0 Playback US-010 As a user, I want the device to play AV1 and VP9 video so that I can watch modern streaming formats. AV1 and VP9 streams decode and display; color space handled correctly. P1 Playback US-011 As a user, I want to play content from MP4, MOV, and MKV files so that I can watch local or streamed media. Containers are parsed; video/audio tracks extracted; playback starts. P0 Playback US-012 As a user, I want to pair my phone with the device via Bluetooth so that I can control it from my mobile app. Device is discoverable; pairing completes; app can send commands. P1 Bluetooth US-013 As a user, I want to navigate (up/down/left/right, select) from the mobile app so that I can use my phone as a remote. Mobile app sends navigation commands; device responds; UI updates. P1 Bluetooth US-014 As a user, I want to control play/pause from the mobile app so that I can manage playback. Play and pause commands from mobile affect stream playback. P1 Bluetooth US-015 As a user, I want to put the TV into standby with the remote Power button so that I can turn off the TV. Power key sends CEC standby to TV; TV powers off. P0 HDMI-CEC US-016 As a user, I want my settings (Wi-Fi, volume, preferences) saved so that I don't re-enter them after power cycle. Settings persist; restored on boot. P0 Config US-017 As a user, I want the device to receive software updates over the air so that I get new features and fixes. OTA updates are supported; user can trigger or auto-update; process is safe. P1 Update US-018 As a user, I want streams to play over a secure (TLS) connection so that my data is protected. Streaming over TLS; certificates validated; no plaintext for sensitive data. P0 Security US-019 As a user, I want to seek within a video (fast forward/rewind) so that I can skip or replay sections. Seek to timestamp works; playback resumes from new position; buffer handled. P1 Playback US-020 As a user, I want multiple audio tracks and subtitles when available so that I can choose language and captions. Multiple tracks supported; user can select; subtitles render on screen. P2 Playback US-021 As a user, I want the device to handle network interruptions gracefully so that playback recovers or shows a clear error. Buffering; retries; user-friendly error message on failure. P0 Reliability US-022 As a user, I want the device to wake from standby when I press a remote key so that I don't need to manually power it. Wake-on-remote (IR/CEC) supported; device resumes from standby. P1 Power US-023 As a user, I want to mute audio with the remote so that I can silence quickly. Mute key mutes TV or device audio via CEC. P1 HDMI-CEC US-024 As a user, I want to connect Bluetooth speakers for audio output so that I can use external speakers. A2DP sink supported; audio routes to Bluetooth speakers when connected. P2 Bluetooth US-025 As a product team, we want clear HAL and service interfaces so that we can swap hardware and test with mocks. HAL and SOA abstractions; mock implementations for unit tests. P0 Architecture US-026 As a test team, we want documented test cases for happy and rainy day scenarios so that we can validate behavior. Test suite document exists; cases cover main flows and error conditions. P0 Testability US-027 As a developer, I want build instructions (CMake, Make) so that I can compile and run locally. README includes build steps; tests run with <code>make test</code> or <code>ctest</code>. P0 DevEx US-028 As a user, I want instructions for connecting the device to my TV via HDMI so that I can set it up correctly. Documentation includes step-by-step HDMI connection and troubleshooting. P0 Documentation"},{"location":"Product_Requirements_Document/#7-epics-summary","title":"7. Epics Summary","text":"Epic Description User Stories Setup Physical connection and first-use US-001 HDMI-CEC TV control via CEC US-002, US-003, US-015, US-023 UI Home page and navigation US-004, US-005 App Launch Launch and exit apps US-006, US-007 Connectivity Wi-Fi and network US-008 Playback Video/audio decode and display US-009, US-010, US-011, US-019, US-020 Bluetooth Mobile app control and A2DP US-012, US-013, US-014, US-024 Config Settings persistence US-016 Update OTA updates US-017 Security TLS, secure pairing US-018 Reliability Error handling, recovery US-021 Power Sleep, wake US-022 Architecture HAL, SOA, testability US-025, US-026, US-027 Documentation Setup and reference docs US-028"},{"location":"Product_Requirements_Document/#8-non-functional-requirements","title":"8. Non-Functional Requirements","text":"Category Requirement Performance UI render at 30\u201360 fps; decode keeps up with playback Latency Input-to-action &lt;200 ms; CEC commands &lt;100 ms Reliability Graceful handling of network loss, corrupt frames, format errors Security TLS for streams; secure Bluetooth pairing; no hardcoded credentials Extensibility New apps and codecs pluggable via config/factory Modularity HAL and SOA; swappable drivers; unit-testable modules"},{"location":"Product_Requirements_Document/#9-out-of-scope-for-mvp","title":"9. Out of Scope (for MVP)","text":"<ul> <li>Native app SDK integrations (Netflix, Prime, etc.); use browser-based or stub for MVP</li> <li>Voice control</li> <li>Multi-user profiles</li> <li>Parental controls</li> <li>Casting from phone (mirroring)</li> <li>Gaming or sideloaded apps</li> </ul>"},{"location":"Product_Requirements_Document/#10-appendix","title":"10. Appendix","text":""},{"location":"Product_Requirements_Document/#101-priority-definitions","title":"10.1 Priority Definitions","text":"Priority Definition P0 Must have for MVP; blocks launch if missing P1 Should have; important for usability P2 Nice to have; can follow post-MVP"},{"location":"Product_Requirements_Document/#102-document-references","title":"10.2 Document References","text":"<ul> <li>Implementation_Document.md</li> <li>Knowledge_Base.md</li> <li>Test_Suite_Document.md</li> <li>Codec_Container_API.md</li> <li>Bluetooth_Control_Protocol.md</li> </ul>"},{"location":"Test_Suite_Document/","title":"Streaming Device Firmware - Test Suite Document","text":""},{"location":"Test_Suite_Document/#1-test-strategy","title":"1. Test Strategy","text":"<ul> <li>Unit Tests: HAL interfaces, services, mocks</li> <li>Integration Tests: End-to-end flows (app launch, CEC, Bluetooth)</li> <li>Happy Path: Expected user flows</li> <li>Rainy Day: Error handling, edge cases, timeouts</li> </ul>"},{"location":"Test_Suite_Document/#2-test-architecture","title":"2. Test Architecture","text":""},{"location":"Test_Suite_Document/#21-test-pyramid-diagram","title":"2.1 Test Pyramid Diagram","text":"<pre><code>                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502 Integration \u2502  Few, slow, full stack\n                    \u2502   Tests     \u2502  (I-001 to I-004)\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                           \u2502\n              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n              \u2502     Service Tests       \u2502  Medium count\n              \u2502  (App Launcher, UI,     \u2502  Mock HAL\n              \u2502   Config, Codec, etc.)  \u2502\n              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                           \u2502\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502              HAL / Unit Tests               \u2502  Many, fast\n    \u2502  (Display, Input, Storage, Mock drivers)    \u2502  Isolated\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"Test_Suite_Document/#22-test-component-diagram","title":"2.2 Test Component Diagram","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         TEST RUNNER (test_runner.cpp)                         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\n\u2502  \u2502 run_hal_    \u2502  \u2502 run_service \u2502  \u2502 run_cec_    \u2502  \u2502 run_codec_container \u2502\u2502\n\u2502  \u2502 tests()     \u2502  \u2502 _tests()    \u2502  \u2502 tests()     \u2502  \u2502 _tests()             \u2502\u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502\n\u2502         \u2502                \u2502                \u2502                \u2502                 \u2502\n\u2502         \u25bc                \u25bc                \u25bc                \u25bc                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\n\u2502  \u2502 Display     \u2502  \u2502 App         \u2502  \u2502 HDMI-CEC    \u2502  \u2502 CodecService        \u2502\u2502\n\u2502  \u2502 Input       \u2502  \u2502 Launcher    \u2502  \u2502 Service     \u2502  \u2502 ContainerService    \u2502\u2502\n\u2502  \u2502 Storage     \u2502  \u2502 UI          \u2502  \u2502             \u2502  \u2502 StreamPipeline      \u2502\u2502\n\u2502  \u2502 HAL         \u2502  \u2502 Config      \u2502  \u2502             \u2502  \u2502                      \u2502\u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502\n\u2502         \u2502                \u2502                \u2502                \u2502                 \u2502\n\u2502         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                 \u2502\n\u2502                                    \u2502                                          \u2502\n\u2502                                    \u25bc                                          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u2502\n\u2502  \u2502                    MOCK DRIVERS (no real hardware)                       \u2502\u2502\n\u2502  \u2502  MockDisplay, MockInput, MockStorage, MockCodec, MockContainer, etc.    \u2502\u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"Test_Suite_Document/#23-interface-test-boundary-diagram","title":"2.3 Interface Test Boundary Diagram","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    WHAT GETS TESTED AT EACH BOUNDARY                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                              \u2502\n\u2502   APPLICATION                    SERVICE                     HAL             \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502\n\u2502   \u2502 main.cpp \u2502                  \u2502 *Service \u2502              \u2502 *Hal     \u2502     \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518                  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518              \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518     \u2502\n\u2502        \u2502                            \u2502                          \u2502            \u2502\n\u2502        \u2502  Integration tests         \u2502  Service tests           \u2502  Unit     \u2502\n\u2502        \u2502  (full flow)               \u2502  (mock HAL)              \u2502  tests    \u2502\n\u2502        \u2502                            \u2502                          \u2502            \u2502\n\u2502        \u25bc                            \u25bc                          \u25bc            \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502\n\u2502   \u2502 Uses     \u2502 \u2500\u2500\u2500 interface \u2500\u2500\u25b6\u2502 Impl     \u2502 \u2500\u2500\u2500 interface \u2500\u2500\u25b6\u2502 Mock   \u2502     \u2502\n\u2502   \u2502 services \u2502                  \u2502 classes  \u2502                  \u2502 Driver  \u2502     \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502\n\u2502                                                                              \u2502\n\u2502   Test focus:                    Test focus:                  Test focus:    \u2502\n\u2502   - End-to-end flow             - Business logic             - API contract \u2502\n\u2502   - User scenarios              - State transitions          - Error codes  \u2502\n\u2502   - Cross-service               - Event publishing           - Edge cases   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"Test_Suite_Document/#24-test-execution-flow","title":"2.4 Test Execution Flow","text":"<pre><code>flowchart TD\n    A[make test / ctest] --&gt; B[Build streaming_device_tests]\n    B --&gt; C[Run test_runner]\n    C --&gt; D[run_hal_tests]\n    C --&gt; E[run_service_tests]\n    C --&gt; F[run_cec_tests]\n    C --&gt; G[run_codec_container_tests]\n    C --&gt; H[run_bluetooth_tests]\n    D --&gt; I{All pass?}\n    E --&gt; I\n    F --&gt; I\n    G --&gt; I\n    H --&gt; I\n    I --&gt;|Yes| J[Exit 0]\n    I --&gt;|No| K[Exit 1, report failures]</code></pre>"},{"location":"Test_Suite_Document/#3-happy-path-test-cases","title":"3. Happy Path Test Cases","text":""},{"location":"Test_Suite_Document/#31-display-hal","title":"3.1 Display HAL","text":"ID Scenario Steps Expected Result H-DIS-001 Display init Call initialize() Result::OK, isConnected() true H-DIS-002 Set resolution setDisplayMode(1080p) Result::OK, getDisplayMode() returns 1920x1080 H-DIS-003 Present frame getFramebuffer(), present() Result::OK, callback invoked H-DIS-004 Clear screen clear() Result::OK"},{"location":"Test_Suite_Document/#32-input-hal","title":"3.2 Input HAL","text":"ID Scenario Steps Expected Result H-INP-001 Init and inject key initialize(), injectKey(UP) getLastKey() == UP H-INP-002 Key down callback setInputCallback(), injectKey(OK) Callback invoked with OK H-INP-003 Poll mode injectKey(BACK), poll() poll returns event with BACK"},{"location":"Test_Suite_Document/#33-app-launcher-service","title":"3.3 App Launcher Service","text":"ID Scenario Steps Expected Result H-APP-001 Register app registerApp(Netflix metadata) getApps() contains Netflix H-APP-002 Launch app launch(netflix) status SUCCESS, non-empty session_id H-APP-003 Stop app stop(session_id) Result::OK, isAppActive() false H-APP-004 Launch unknown launch(unknown_id) status NOT_FOUND"},{"location":"Test_Suite_Document/#34-ui-service","title":"3.4 UI Service","text":"ID Scenario Steps Expected Result H-UI-001 Set icons setAppIcons(ids, labels) getFocusedElementId() == first id H-UI-002 Navigate right navigate(RIGHT) Focus moves to next icon H-UI-003 Select select() Returns OK H-UI-004 Render render() Result::OK"},{"location":"Test_Suite_Document/#35-hdmi-cec-service","title":"3.5 HDMI-CEC Service","text":"ID Scenario Steps Expected Result H-CEC-001 Power on TV powerOnTv() Result::OK H-CEC-002 Send volume up sendKeyToTv(VOLUME_UP) Result::OK H-CEC-003 Standby standbyTv() Result::OK H-CEC-004 TV present isTvPresent() true when TV connected"},{"location":"Test_Suite_Document/#36-bluetooth-control-service","title":"3.6 Bluetooth Control Service","text":"ID Scenario Steps Expected Result H-BT-001 Init initialize() Result::OK H-BT-002 Send status sendStatus(data) Result::OK H-BT-003 Command callback setCommandCallback(), simulate write Callback invoked"},{"location":"Test_Suite_Document/#37-config-service","title":"3.7 Config Service","text":"ID Scenario Steps Expected Result H-CFG-001 Set/get string setString(k,v), getString(k) value matches H-CFG-002 Set/get int setInt(k,42), getInt(k) 42 H-CFG-003 Set/get bool setBool(k,true), getBool(k) true"},{"location":"Test_Suite_Document/#38-streaming-service","title":"3.8 Streaming Service","text":"ID Scenario Steps Expected Result H-STR-001 Start session startSession(netflix, content, sess) Result::OK, state PLAYING H-STR-002 Pause pause() state PAUSED H-STR-003 Resume resume() state PLAYING H-STR-004 Stop stopSession() state IDLE"},{"location":"Test_Suite_Document/#39-codec-service","title":"3.9 Codec Service","text":"ID Scenario Steps Expected Result H-CODEC-001 Register codec registerCodec(HEVC, factory, info) Result::OK H-CODEC-002 Create decoder createDecoder(track, true) Non-null decoder H-CODEC-003 Decode frame decodeFrame(packet) frame_ready, Result::OK H-CODEC-004 Get capabilities getCapabilities(HEVC) max_width 3840"},{"location":"Test_Suite_Document/#310-container-service","title":"3.10 Container Service","text":"ID Scenario Steps Expected Result H-CON-001 Open MP4 open(\"video.mp4\") Result::OK H-CON-002 Get tracks getTracks() Video + audio tracks H-CON-003 Get duration getDurationUs() &gt; 0 H-CON-004 Read packet readPacket(pkt) Result::OK or TIMEOUT"},{"location":"Test_Suite_Document/#311-stream-pipeline","title":"3.11 Stream Pipeline","text":"ID Scenario Steps Expected Result H-PIPE-001 Open stream open(\"video.mp4\") Result::OK H-PIPE-002 Play play() (after open) State PLAYING H-PIPE-003 Seek seek(5000000) Result::OK H-PIPE-004 Stop stop() State IDLE"},{"location":"Test_Suite_Document/#4-rainy-day-test-cases","title":"4. Rainy Day Test Cases","text":""},{"location":"Test_Suite_Document/#41-display","title":"4.1 Display","text":"ID Scenario Steps Expected Result R-DIS-001 Present when disconnected (simulate disconnect), present() Graceful handling or ERROR R-DIS-002 Invalid resolution setDisplayMode(0x0) ERROR_INVALID_PARAM or safe default"},{"location":"Test_Suite_Document/#42-input","title":"4.2 Input","text":"ID Scenario Steps Expected Result R-INP-001 Poll empty poll() with no events ERROR_TIMEOUT R-INP-002 Init twice initialize() x2 No crash, Result::OK"},{"location":"Test_Suite_Document/#43-app-launcher","title":"4.3 App Launcher","text":"ID Scenario Steps Expected Result R-APP-001 Launch unknown app launch(\"nonexistent\") NOT_FOUND R-APP-002 Stop invalid session stop(\"invalid_sess\") ERROR_NOT_FOUND R-APP-003 Launch while app active launch(A), launch(B) without stop B replaces A or ERROR_BUSY"},{"location":"Test_Suite_Document/#44-wi-fi","title":"4.4 Wi-Fi","text":"ID Scenario Steps Expected Result R-WF-001 Connect bad credentials connect(ssid, wrong_pass) ERROR or FAILED state R-WF-002 Resolve unknown host resolveHost(\"invalid.xyz\") ERROR or empty R-WF-003 Disconnect when not connected disconnect() No crash, Result::OK"},{"location":"Test_Suite_Document/#45-storage","title":"4.5 Storage","text":"ID Scenario Steps Expected Result R-STR-001 Read missing key read(\"nonexistent\") ERROR_NOT_FOUND R-STR-002 Write to full storage (simulate full), write() ERROR_NO_MEMORY or ERROR_IO"},{"location":"Test_Suite_Document/#46-streaming","title":"4.6 Streaming","text":"ID Scenario Steps Expected Result R-STRM-001 Start with no network startSession() when WiFi disconnected ERROR_NETWORK or retry R-STRM-002 Stop when idle stopSession() when IDLE Result::OK, no crash R-STRM-003 Auth required app startSession(auth_app) AUTH_REQUIRED or handled"},{"location":"Test_Suite_Document/#47-hdmi-cec","title":"4.7 HDMI-CEC","text":"ID Scenario Steps Expected Result R-CEC-001 Send when TV absent sendKeyToTv() when !isTvPresent() ERROR_NOT_FOUND R-CEC-002 Queue overflow Send many rapid commands Queue bounded, no crash"},{"location":"Test_Suite_Document/#48-bluetooth","title":"4.8 Bluetooth","text":"ID Scenario Steps Expected Result R-BT-001 Send status when disconnected sendStatus() when !isConnected() ERROR or buffered R-BT-002 Invalid GATT write Malformed command byte Ignored, no crash"},{"location":"Test_Suite_Document/#49-container-service","title":"4.9 Container Service","text":"ID Scenario Steps Expected Result R-CON-001 Path without extension open(\"noextension\") UNKNOWN format, ERROR_NOT_SUPPORTED R-CON-002 Open invalid path open(\"nonexistent.mp4\") Graceful error"},{"location":"Test_Suite_Document/#410-stream-pipeline","title":"4.10 Stream Pipeline","text":"ID Scenario Steps Expected Result R-PIPE-001 Play without open play() from IDLE ERROR_BUSY R-PIPE-002 Open with no video track open(audio_only_file) ERROR_NOT_FOUND"},{"location":"Test_Suite_Document/#5-integration-test-scenarios","title":"5. Integration Test Scenarios","text":"ID Scenario Steps Expected I-001 Full app launch flow Input OK \u2192 UI select \u2192 App launch \u2192 Streaming start Session active I-002 Back from app In app, Back key \u2192 Streaming stop \u2192 App stop Home UI I-003 CEC volume Remote VOL_UP \u2192 CEC service \u2192 TV Volume increases I-004 Bluetooth control Mobile writes SELECT \u2192 Device launches app App launched"},{"location":"Test_Suite_Document/#6-test-execution","title":"6. Test Execution","text":""},{"location":"Test_Suite_Document/#61-with-make","title":"6.1 With Make","text":"<pre><code>make all\nmake test\n</code></pre>"},{"location":"Test_Suite_Document/#62-with-cmake","title":"6.2 With CMake","text":"<pre><code>mkdir build &amp;&amp; cd build\ncmake .. -DBUILD_TESTS=ON\ncmake --build .\nctest --output-on-failure\n</code></pre>"},{"location":"Test_Suite_Document/#63-run-individual-binary","title":"6.3 Run Individual Binary","text":"<pre><code>./build/streaming_device_tests\n</code></pre>"},{"location":"Test_Suite_Document/#64-expected-output","title":"6.4 Expected Output","text":"<pre><code>=== HAL Tests ===\nTest: Display init ... OK\nTest: Input init and inject ... OK\nTest: Storage read/write ... OK\n\n=== Service Tests ===\nTest: App Launcher ... OK\n...\n\n========================================\nPassed: 44, Failed: 0\n</code></pre>"},{"location":"api/hal-interfaces/","title":"HAL Interfaces","text":"<p>Hardware Abstraction Layer interfaces. Implementations are in <code>src/drivers/</code>.</p>"},{"location":"api/hal-interfaces/#overview","title":"Overview","text":"<pre><code>graph LR\n    subgraph HAL\n        D[IDisplayHal]\n        I[IInputHal]\n        W[IWifiHal]\n        B[IBluetoothHal]\n        C[IHdmiCecHal]\n        S[IStorageHal]\n    end\n\n    subgraph Impl\n        Mock[Mock Drivers]\n    end\n\n    D --&gt; Mock\n    I --&gt; Mock\n    W --&gt; Mock\n    B --&gt; Mock\n    C --&gt; Mock\n    S --&gt; Mock</code></pre>"},{"location":"api/hal-interfaces/#interfaces","title":"Interfaces","text":"Interface Purpose Key Methods IDisplayHal Framebuffer, HDMI output <code>initialize</code>, <code>present</code>, <code>setDisplayMode</code>, <code>getFramebuffer</code> IInputHal Remote, IR, touch <code>setInputCallback</code>, <code>poll</code>, <code>setEnabled</code> IWifiHal Wi-Fi client <code>connect</code>, <code>disconnect</code>, <code>scan</code>, <code>resolveHost</code> IBluetoothHal A2DP, GATT <code>registerControlService</code>, <code>writeCharacteristic</code>, <code>connectA2dpSink</code> IHdmiCecHal CEC to TV <code>sendPowerOn</code>, <code>sendStandby</code>, <code>sendRemoteKey</code> IStorageHal Key-value store <code>read</code>, <code>write</code>, <code>exists</code>, <code>remove</code> IPowerHal Sleep, wake <code>enterStandby</code>, <code>wake</code>, <code>enableWakeOnRemote</code> IAudioHal HDMI/A2DP audio <code>setSink</code>, <code>play</code>, <code>setVolume</code>, <code>setMute</code> ICodecDecoder Video decode <code>decodeFrame</code>, <code>flush</code>, <code>reset</code>, <code>getCapabilities</code> IContainerParser Demux <code>openContainer</code>, <code>readPacket</code>, <code>seek</code>, <code>getTracks</code> IVideoPipeline Color, HDR <code>submitFrame</code>, <code>setHdrMetadata</code> IDrmHal Content protection <code>requestKeys</code>, <code>releaseSession</code>"},{"location":"api/hal-interfaces/#factory","title":"Factory","text":"<pre><code>auto display = hal::createDisplayHal();\nauto input = hal::createInputHal();\n// ... etc.\n</code></pre> <p>Factory functions in <code>hal_factory.cpp</code> and <code>media_hal_factory.cpp</code> return mock or platform implementations.</p>"},{"location":"api/media-types/","title":"Media Types","text":"<p>Defined in <code>include/streaming_device/media_types.hpp</code>.</p>"},{"location":"api/media-types/#video-codecs","title":"Video Codecs","text":"Codec Enum Notes H.265/HEVC <code>VideoCodec::H265_HEVC</code> 4K, HDR AV1 <code>VideoCodec::AV1</code> Royalty-free VP9 <code>VideoCodec::VP9</code> Web streaming MPEG-4 Part 2 <code>VideoCodec::MPEG4_PART2</code> Legacy ProRes <code>VideoCodec::PRORES</code> Editing"},{"location":"api/media-types/#container-formats","title":"Container Formats","text":"Format Enum MP4 <code>ContainerFormat::MP4</code> MOV <code>ContainerFormat::MOV</code> MKV <code>ContainerFormat::MKV</code>"},{"location":"api/media-types/#key-structs","title":"Key Structs","text":"Struct Purpose <code>TrackMetadata</code> Track type, duration, codec info <code>VideoTrackInfo</code> Width, height, frame rate, HDR <code>EncodedPacket</code> Data from demuxer <code>DecodedFrame</code> Output from decoder <code>HdrMetadata</code> Color primaries, mastering display"},{"location":"api/services/","title":"Services","text":"<p>Service-oriented layer. Interfaces in <code>src/services/*.hpp</code>.</p>"},{"location":"api/services/#service-dependencies","title":"Service Dependencies","text":"<pre><code>graph TD\n    Main[main.cpp] --&gt; UI[IUiService]\n    Main --&gt; App[IAppLauncherService]\n    Main --&gt; Stream[IStreamingService]\n    Main --&gt; CEC[IHdmiCecService]\n    Main --&gt; Config[IConfigService]\n\n    Stream --&gt; Pipeline[IStreamPipeline]\n    Pipeline --&gt; Codec[ICodecService]\n    Pipeline --&gt; Container[IContainerService]\n\n    UI --&gt; Display[Display HAL]\n    UI --&gt; Input[Input HAL]\n    CEC --&gt; CECHAL[HDMI-CEC HAL]\n    Config --&gt; Storage[Storage HAL]</code></pre>"},{"location":"api/services/#service-interfaces","title":"Service Interfaces","text":"Service Purpose IUiService Home page, app icons, navigation IAppLauncherService Register apps, launch by ID IStreamingService Start/stop sessions, pause/resume ICodecService Register decoders, create for track IContainerService Open file, read packets, get tracks IStreamPipeline Demux \u2192 decode \u2192 output IHdmiCecService Map keys to CEC IBluetoothControlService Mobile app commands IConfigService Persistent settings ITelemetryService Logging IUpdateService OTA updates"},{"location":"api/services/#creation","title":"Creation","text":"<pre><code>auto ui = services::createUiService();\nauto launcher = services::createAppLauncherService();\n// ...\n</code></pre>"},{"location":"architecture/data-flows/","title":"Data Flows","text":"<p>Key data and control flows in the system.</p>"},{"location":"architecture/data-flows/#app-launch-sequence","title":"App Launch Sequence","text":"<pre><code>sequenceDiagram\n    participant U as User\n    participant I as Input HAL\n    participant UI as UI Service\n    participant A as App Launcher\n    participant S as Streaming Service\n    participant P as Stream Pipeline\n\n    U-&gt;&gt;I: Remote OK\n    I-&gt;&gt;UI: Key Event\n    UI-&gt;&gt;UI: select()\n    UI-&gt;&gt;A: launch(app_id)\n    A-&gt;&gt;S: startSession()\n    S-&gt;&gt;P: open() + play()</code></pre>"},{"location":"architecture/data-flows/#input-to-cec-flow","title":"Input to CEC Flow","text":"<pre><code>sequenceDiagram\n    participant R as Remote\n    participant I as Input HAL\n    participant M as Main Loop\n    participant CEC as HDMI-CEC Service\n    participant TV as TV\n\n    R-&gt;&gt;I: Volume Up\n    I-&gt;&gt;M: Key Event\n    M-&gt;&gt;CEC: sendKeyToTv(VOLUME_UP)\n    CEC-&gt;&gt;TV: CEC User Control</code></pre>"},{"location":"architecture/data-flows/#streaming-pipeline-flow","title":"Streaming Pipeline Flow","text":"<pre><code>sequenceDiagram\n    participant C as Container Service\n    participant D as Codec Service\n    participant V as Video Pipeline\n    participant H as Display HAL\n\n    C-&gt;&gt;C: open(path)\n    C-&gt;&gt;D: createDecoder(track)\n    loop Playback\n        C-&gt;&gt;C: readPacket()\n        C-&gt;&gt;D: decodeFrame(packet)\n        D-&gt;&gt;V: submitFrame()\n        V-&gt;&gt;H: present()\n    end</code></pre>"},{"location":"architecture/module-map-generated/","title":"Module Map (Auto-Generated)","text":"<p>Regenerate with: <code>python scripts/generate_architecture.py</code></p>"},{"location":"architecture/module-map-generated/#mermaid-diagram","title":"Mermaid Diagram","text":"<pre><code>graph TB\n    subgraph HAL\n        audio_hal[audio_hal]\n        bluetooth_hal[bluetooth_hal]\n        codec_hal[codec_hal]\n        container_hal[container_hal]\n        display_hal[display_hal]\n        drm_hal[drm_hal]\n        hdmi_cec_hal[hdmi_cec_hal]\n        input_hal[input_hal]\n        power_hal[power_hal]\n        storage_hal[storage_hal]\n        video_pipeline_hal[video_pipeline_hal]\n        wifi_hal[wifi_hal]\n    end\n\n    subgraph Services\n        app_launcher_service[app_launcher_service]\n        bluetooth_control_service[bluetooth_control_service]\n        codec_service[codec_service]\n        config_service[config_service]\n        container_service[container_service]\n        hdmi_cec_service[hdmi_cec_service]\n        stream_pipeline_service[stream_pipeline_service]\n        streaming_service[streaming_service]\n        telemetry_service[telemetry_service]\n        ui_service[ui_service]\n        update_service[update_service]\n    end\n\n    subgraph MockDrivers\n        mock_audio_driver[mock_audio_driver]\n        mock_bluetooth_driver[mock_bluetooth_driver]\n        mock_codec_decoder[mock_codec_decoder]\n        mock_container_parser[mock_container_parser]\n        mock_display_driver[mock_display_driver]\n        mock_hdmi_cec_driver[mock_hdmi_cec_driver]\n        mock_input_driver[mock_input_driver]\n        mock_power_driver[mock_power_driver]\n        mock_storage_driver[mock_storage_driver]\n        mock_video_pipeline[mock_video_pipeline]\n        mock_wifi_driver[mock_wifi_driver]\n    end</code></pre>"},{"location":"architecture/module-map-generated/#hal-modules","title":"HAL Modules","text":"Module File audio_hal audio_hal.hpp bluetooth_hal bluetooth_hal.hpp codec_hal codec_hal.hpp container_hal container_hal.hpp display_hal display_hal.hpp drm_hal drm_hal.hpp hdmi_cec_hal hdmi_cec_hal.hpp input_hal input_hal.hpp power_hal power_hal.hpp storage_hal storage_hal.hpp video_pipeline_hal video_pipeline_hal.hpp wifi_hal wifi_hal.hpp"},{"location":"architecture/module-map-generated/#services","title":"Services","text":"Service app_launcher_service bluetooth_control_service codec_service config_service container_service hdmi_cec_service stream_pipeline_service streaming_service telemetry_service ui_service update_service"},{"location":"architecture/module-map-generated/#mock-drivers","title":"Mock Drivers","text":"Driver mock_audio_driver mock_bluetooth_driver mock_codec_decoder mock_container_parser mock_display_driver mock_hdmi_cec_driver mock_input_driver mock_power_driver mock_storage_driver mock_video_pipeline mock_wifi_driver"},{"location":"architecture/module-map/","title":"Module Map","text":"<p>Auto-generated from the repository structure. Run <code>python scripts/generate_architecture.py</code> to regenerate.</p>"},{"location":"architecture/module-map/#source-modules","title":"Source Modules","text":"Module Path Purpose HAL <code>src/hal/</code> Hardware abstraction interfaces Mock Drivers <code>src/drivers/mock/</code> Unit-test implementations Services <code>src/services/</code> SOA business logic Common <code>src/common/</code> Event bus, logger, exceptions Main <code>src/main.cpp</code> Application entry"},{"location":"architecture/module-map/#hal-modules","title":"HAL Modules","text":"Interface File Purpose IDisplayHal display_hal.hpp Framebuffer, present IInputHal input_hal.hpp Remote/key events IWifiHal wifi_hal.hpp Wi-Fi client IBluetoothHal bluetooth_hal.hpp A2DP, GATT IHdmiCecHal hdmi_cec_hal.hpp CEC commands IStorageHal storage_hal.hpp Key-value storage IPowerHal power_hal.hpp Sleep, wake IAudioHal audio_hal.hpp HDMI/A2DP audio ICodecDecoder codec_hal.hpp Video decode IContainerParser container_hal.hpp Demux MP4/MOV/MKV IVideoPipeline video_pipeline_hal.hpp Color, HDR IDrmHal drm_hal.hpp Content protection"},{"location":"architecture/module-map/#services","title":"Services","text":"Service Purpose IUiService Home page, navigation IAppLauncherService Register/launch apps IStreamingService Session management ICodecService Codec registration IContainerService Demux, tracks IStreamPipeline Demux\u2192decode\u2192output IHdmiCecService CEC mapping IBluetoothControlService Mobile control IConfigService Settings ITelemetryService Logging IUpdateService OTA"},{"location":"architecture/overview/","title":"Architecture Overview","text":"<p>The streaming device firmware uses a three-layer architecture: Application \u2192 Services (SOA) \u2192 HAL (Hardware Abstraction Layer) \u2192 Drivers.</p>"},{"location":"architecture/overview/#layer-diagram","title":"Layer Diagram","text":"<pre><code>graph TB\n    subgraph Application\n        Main[main.cpp]\n    end\n\n    subgraph Services[\"Service Layer (SOA)\"]\n        UI[UI Service]\n        App[App Launcher]\n        Stream[Streaming]\n        CEC[HDMI-CEC]\n        Codec[Codec]\n        Container[Container]\n        Pipeline[Stream Pipeline]\n    end\n\n    subgraph HAL[\"Hardware Abstraction Layer\"]\n        Display[Display HAL]\n        Input[Input HAL]\n        WiFi[Wi-Fi HAL]\n        BT[Bluetooth HAL]\n        CECHAL[CEC HAL]\n        Storage[Storage HAL]\n        CodecHAL[Codec HAL]\n        ContainerHAL[Container HAL]\n    end\n\n    subgraph Drivers[\"Drivers\"]\n        Mock[Mock Drivers]\n        Platform[Platform Drivers]\n    end\n\n    Main --&gt; UI\n    Main --&gt; App\n    Main --&gt; Stream\n    Main --&gt; CEC\n    Stream --&gt; Pipeline\n    Pipeline --&gt; Codec\n    Pipeline --&gt; Container\n    UI --&gt; Display\n    UI --&gt; Input\n    CEC --&gt; CECHAL\n    Codec --&gt; CodecHAL\n    Container --&gt; ContainerHAL\n    Display --&gt; Mock\n    Input --&gt; Mock\n    CECHAL --&gt; Mock</code></pre>"},{"location":"architecture/overview/#design-principles","title":"Design Principles","text":"<ol> <li>HAL \u2013 All hardware access via abstract interfaces; platform drivers implement them.</li> <li>SOA \u2013 Services communicate via event bus; clear boundaries.</li> <li>Testability \u2013 Mock drivers allow unit tests without hardware.</li> <li>Extensibility \u2013 New apps, codecs, and platforms via config and factories.</li> </ol>"},{"location":"architecture/overview/#related","title":"Related","text":"<ul> <li>System Diagram</li> <li>Data Flows</li> <li>Module Map</li> </ul>"},{"location":"architecture/system-diagram/","title":"System Diagram","text":"<p>High-level block diagram of the streaming device firmware.</p>"},{"location":"architecture/system-diagram/#full-system","title":"Full System","text":"<pre><code>graph TB\n    subgraph Device[\"Streaming Device\"]\n        subgraph AppLayer[\"Application\"]\n            Main[main.cpp]\n        end\n\n        subgraph SvcLayer[\"Services\"]\n            UI[UI Service]\n            App[App Launcher]\n            Stream[Streaming Service]\n            CEC[HDMI-CEC Service]\n            Codec[Codec Service]\n            Container[Container Service]\n            Pipeline[Stream Pipeline]\n        end\n\n        subgraph HAL[\"HAL\"]\n            D[Display]\n            I[Input]\n            W[Wi-Fi]\n            B[Bluetooth]\n            C[HDMI-CEC]\n            S[Storage]\n            Cd[Codec]\n            Cn[Container]\n        end\n    end\n\n    subgraph External[\"External\"]\n        TV[TV]\n        Network[Wi-Fi Network]\n        Mobile[Mobile App]\n    end\n\n    Main --&gt; UI\n    Main --&gt; App\n    Main --&gt; Stream\n    Main --&gt; CEC\n    Stream --&gt; Pipeline\n    Pipeline --&gt; Codec\n    Pipeline --&gt; Container\n\n    D --&gt; TV\n    C --&gt; TV\n    W --&gt; Network\n    B --&gt; Mobile</code></pre>"},{"location":"architecture/system-diagram/#media-pipeline","title":"Media Pipeline","text":"<pre><code>flowchart LR\n    A[Container Service] --&gt;|EncodedPacket| B[Codec Service]\n    B --&gt;|DecodedFrame| C[Video Pipeline]\n    C --&gt;|Framebuffer| D[Display HAL]\n    D --&gt;|HDMI| E[TV]</code></pre>"},{"location":"architecture/system-diagram/#interfaces","title":"Interfaces","text":"<pre><code>flowchart TD\n    subgraph App[\"Application\"]\n        Main[main.cpp]\n    end\n\n    subgraph Iface[\"Interfaces\"]\n        ISvc[\"I*Service\"]\n        IHAL[\"I*Hal\"]\n    end\n\n    subgraph Impl[\"Implementations\"]\n        SvcImpl[ServiceImpl]\n        Mock[MockDriver]\n        Platform[PlatformDriver]\n    end\n\n    Main --&gt; ISvc\n    ISvc --&gt; SvcImpl\n    SvcImpl --&gt; IHAL\n    IHAL --&gt; Mock\n    IHAL --&gt; Platform</code></pre>"},{"location":"development/adding-apps/","title":"Adding a New App","text":"<ol> <li>Add to config: Edit <code>config/apps.json</code>:</li> </ol> <pre><code>{\n  \"id\": \"newapp\",\n  \"name\": \"New App\",\n  \"icon_path\": \"/icons/newapp.png\",\n  \"package_uri\": \"https://newapp.com\",\n  \"auth_endpoint\": \"\",\n  \"requires_auth\": false\n}\n</code></pre> <ol> <li>Register at runtime: In <code>main.cpp</code> or during init:</li> </ol> <pre><code>app_launcher-&gt;registerApp({\n    \"newapp\", \"New App\", \"/icons/newapp.png\",\n    \"https://newapp.com\", \"\", false\n});\n</code></pre> <ol> <li>Streaming pipeline: The streaming service uses the <code>package_uri</code> or <code>content_id</code> to open content. Ensure the streaming backend supports the app's URL scheme.</li> </ol>"},{"location":"development/adding-codecs/","title":"Adding a Codec","text":"<ol> <li> <p>Implement HAL: Create a class implementing <code>ICodecDecoder</code> in <code>src/drivers/</code> or <code>src/hal/</code>.</p> </li> <li> <p>Register with CodecService:</p> </li> </ol> <pre><code>codec_svc-&gt;registerCodec(\n    media::VideoCodec::NEW_CODEC,\n    []() { return std::make_unique&lt;NewCodecDecoder&gt;(); },\n    {media::VideoCodec::NEW_CODEC, \"NewCodec\", false, 0}\n);\n</code></pre> <ol> <li>Add enum: If adding a new codec type, update <code>media_types.hpp</code>:</li> </ol> <pre><code>enum class VideoCodec : uint8_t {\n    // ...\n    NEW_CODEC\n};\n</code></pre> <ol> <li>Update factory: Add to <code>hal_factory</code> or codec registration in <code>CodecService::initialize()</code>.</li> </ol>"},{"location":"development/contributing/","title":"Contributing","text":""},{"location":"development/contributing/#development-setup","title":"Development Setup","text":"<ol> <li>Clone the repository</li> <li>Build with <code>make all</code> or <code>cmake -B build &amp;&amp; cmake --build build</code></li> <li>Run tests: <code>make test</code></li> </ol>"},{"location":"development/contributing/#code-style","title":"Code Style","text":"<ul> <li>C++17</li> <li>4 spaces indent</li> <li>Interfaces: pure virtual in <code>*Hal</code> / <code>*Service</code> headers</li> <li>Implementations: in <code>.cpp</code> files</li> </ul>"},{"location":"development/contributing/#testing","title":"Testing","text":"<ul> <li>Add unit tests in <code>tests/</code> for new HAL or services</li> <li>Run <code>make test</code> before submitting</li> <li>Mock drivers used by default</li> </ul>"},{"location":"development/contributing/#documentation","title":"Documentation","text":"<ul> <li>Update relevant <code>docs/</code> when changing APIs</li> <li>Regenerate architecture: <code>python scripts/generate_architecture.py</code></li> <li>Preview docs: <code>mkdocs serve</code></li> </ul>"},{"location":"development/docs-guide/","title":"Documentation Guide","text":"<p>This section describes how the documentation is organized and how to build or extend it.</p>"},{"location":"development/docs-guide/#structure","title":"Structure","text":"Path Purpose <code>index.md</code> Documentation home <code>guides/</code> Quick start, build, HDMI setup <code>architecture/</code> System design, diagrams, module map <code>api/</code> HAL and service API overview <code>development/</code> Project structure, contributing <code>testing/</code> Test strategy and execution <code>*.md</code> (root) Reference documents (Implementation, PRD, etc.)"},{"location":"development/docs-guide/#building","title":"Building","text":"<pre><code>pip install -r docs/requirements-docs.txt\nmkdocs build\n</code></pre>"},{"location":"development/docs-guide/#serving-locally","title":"Serving Locally","text":"<pre><code>mkdocs serve\n# Open http://127.0.0.1:8000\n</code></pre>"},{"location":"development/docs-guide/#regenerating-architecture","title":"Regenerating Architecture","text":"<pre><code>python scripts/generate_architecture.py\n</code></pre> <p>Updates <code>architecture/module-map-generated.md</code> from the <code>src/</code> directory structure.</p>"},{"location":"development/docs-guide/#mermaid-diagrams","title":"Mermaid Diagrams","text":"<p>Diagrams use Mermaid syntax. They render in:</p> <ul> <li>MkDocs Material (when built)</li> <li>GitHub (native Markdown preview)</li> <li>Most modern Markdown viewers</li> </ul>"},{"location":"development/project-structure/","title":"Project Structure","text":""},{"location":"development/project-structure/#directory-layout","title":"Directory Layout","text":"<pre><code>streamingDevice_HDMI/\n\u251c\u2500\u2500 include/streaming_device/   # Public headers\n\u2502   \u251c\u2500\u2500 types.hpp\n\u2502   \u2514\u2500\u2500 media_types.hpp\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 hal/                    # HAL interfaces + factory\n\u2502   \u251c\u2500\u2500 drivers/mock/           # Mock implementations\n\u2502   \u251c\u2500\u2500 services/               # SOA services\n\u2502   \u251c\u2500\u2500 common/                 # Event bus, logger\n\u2502   \u2514\u2500\u2500 main.cpp\n\u251c\u2500\u2500 config/                     # Configuration files\n\u251c\u2500\u2500 tests/                      # Test sources\n\u251c\u2500\u2500 docs/                       # Documentation source\n\u251c\u2500\u2500 scripts/                    # Build/doc scripts\n\u251c\u2500\u2500 CMakeLists.txt\n\u251c\u2500\u2500 Makefile\n\u2514\u2500\u2500 mkdocs.yml\n</code></pre>"},{"location":"development/project-structure/#naming-conventions","title":"Naming Conventions","text":"Type Convention Example HAL interface <code>I*Hal</code> <code>IDisplayHal</code> Service interface <code>I*Service</code> <code>IUiService</code> Implementation <code>*ServiceImpl</code> <code>UiServiceImpl</code> Mock driver <code>Mock*Driver</code> <code>MockDisplayDriver</code>"},{"location":"guides/build-and-run/","title":"Build &amp; Run","text":""},{"location":"guides/build-and-run/#build-options","title":"Build Options","text":"Method Command Notes Make <code>make all</code> No CMake; single command CMake <code>cmake -B build &amp;&amp; cmake --build build</code> Standard out-of-tree build"},{"location":"guides/build-and-run/#cmake-options","title":"CMake Options","text":"<pre><code>cmake -B build \\\n  -DUSE_MOCK_HAL=ON \\   # Use mock drivers (default)\n  -DBUILD_TESTS=ON      # Build test binary (default)\ncmake --build build\n</code></pre>"},{"location":"guides/build-and-run/#targets","title":"Targets","text":"Target Description <code>streaming_device</code> Main application <code>streaming_device_tests</code> Unit and integration tests"},{"location":"guides/build-and-run/#running","title":"Running","text":"<pre><code># Main app (runs until Ctrl+C)\n./build/streaming_device\n\n# Tests\n./build/streaming_device_tests\n# or: make test\n</code></pre>"},{"location":"guides/build-and-run/#configuration","title":"Configuration","text":"<ul> <li>Mock HAL: Enabled by default; no real hardware required</li> <li>App list: Edit <code>config/apps.json</code> for available streaming apps</li> </ul>"},{"location":"guides/hdmi-setup/","title":"HDMI Setup","text":"<p>Step-by-step instructions for connecting the streaming device to your TV.</p>"},{"location":"guides/hdmi-setup/#connection-diagram","title":"Connection Diagram","text":"<pre><code>flowchart LR\n    subgraph TV\n        HDMI1[HDMI 1]\n        HDMI2[HDMI 2]\n    end\n\n    subgraph Cable[HDMI Cable Type A]\n        direction TB\n    end\n\n    subgraph Device[Streaming Device]\n        HDMI_OUT[HDMI OUT]\n        Power[Power]\n    end\n\n    HDMI1 &lt;--&gt; Cable\n    Cable &lt;--&gt; HDMI_OUT</code></pre>"},{"location":"guides/hdmi-setup/#steps","title":"Steps","text":"Step Action 1 Power off TV and device 2 Locate HDMI input on TV (side or back) 3 Locate HDMI OUT port on device 4 Connect HDMI cable: TV input \u2194 device HDMI OUT 5 Connect device power (USB or DC) 6 Power on TV first, then device 7 Select HDMI input on TV (e.g., HDMI 1) 8 Enable CEC in TV settings (optional, for remote control)"},{"location":"guides/hdmi-setup/#cable-reference","title":"Cable Reference","text":"Spec Notes Connector HDMI Type A (19-pin) 1080p HDMI 1.4+ 4K HDR HDMI 2.0+ recommended Length Standard up to ~5 m; use active/fiber for longer"},{"location":"guides/hdmi-setup/#troubleshooting","title":"Troubleshooting","text":"Issue Solution No picture Select correct HDMI input on TV No picture Ensure cable is fully seated No CEC Enable HDMI-CEC in TV settings Black screen Check device output resolution"},{"location":"guides/quick-start/","title":"Quick Start","text":"<p>Get the streaming device firmware running in under 5 minutes.</p>"},{"location":"guides/quick-start/#prerequisites","title":"Prerequisites","text":"<ul> <li>C++17 compiler: GCC 7+, Clang 5+, or MSVC 2017+</li> <li>CMake 3.14+ (optional; Makefile available)</li> <li>Make (optional; for Makefile build)</li> </ul>"},{"location":"guides/quick-start/#clone-and-build","title":"Clone and Build","text":"<pre><code>git clone https://github.com/mravikanth2259/streamingDevice_HDMI.git\ncd streamingDevice_HDMI\n\n# Option A: Make\nmake all\n\n# Option B: CMake\ncmake -B build &amp;&amp; cmake --build build\n</code></pre>"},{"location":"guides/quick-start/#run","title":"Run","text":"<pre><code># Main application\n./build/streaming_device\n\n# Tests\nmake test\n# or: ./build/streaming_device_tests\n</code></pre>"},{"location":"guides/quick-start/#connect-to-tv","title":"Connect to TV","text":"<ol> <li>Power off TV and device</li> <li>Connect HDMI cable: device HDMI OUT \u2192 TV HDMI input</li> <li>Connect device power</li> <li>Power on TV, then device</li> <li>Select HDMI input on TV (e.g., HDMI 1)</li> </ol> <p>See HDMI Setup for detailed instructions.</p>"},{"location":"guides/quick-start/#next-steps","title":"Next Steps","text":"<ul> <li>Build &amp; Run \u2013 Build options and configuration</li> <li>Architecture Overview \u2013 System design</li> <li>Project Structure \u2013 Codebase layout</li> </ul>"},{"location":"testing/running-tests/","title":"Running Tests","text":""},{"location":"testing/running-tests/#make","title":"Make","text":"<pre><code>make test\n</code></pre>"},{"location":"testing/running-tests/#cmake","title":"CMake","text":"<pre><code>cmake -B build -DBUILD_TESTS=ON\ncmake --build build\nctest --test-dir build --output-on-failure\n</code></pre>"},{"location":"testing/running-tests/#direct-binary","title":"Direct Binary","text":"<pre><code>./build/streaming_device_tests\n</code></pre>"},{"location":"testing/running-tests/#expected-output","title":"Expected Output","text":"<pre><code>=== HAL Tests ===\nTest: Display init ... OK\n...\n========================================\nPassed: 44, Failed: 0\n</code></pre>"},{"location":"testing/test-cases/","title":"Test Cases","text":"<p>See Test_Suite_Document for full tables. Summary:</p>"},{"location":"testing/test-cases/#happy-path","title":"Happy Path","text":"<ul> <li>Display init, present, clear</li> <li>Input inject, poll, callback</li> <li>App Launcher register, launch, stop</li> <li>UI set icons, navigate, select</li> <li>HDMI-CEC power, volume, standby</li> <li>Codec create decoder, decode frame</li> <li>Container open, get tracks, read packet</li> <li>Stream Pipeline open, play, seek, stop</li> </ul>"},{"location":"testing/test-cases/#rainy-day","title":"Rainy Day","text":"<ul> <li>Invalid parameters</li> <li>Missing resources</li> <li>Play without open (ERROR_BUSY)</li> <li>Path without extension (UNKNOWN format)</li> </ul>"},{"location":"testing/test-strategy/","title":"Test Strategy","text":""},{"location":"testing/test-strategy/#test-pyramid","title":"Test Pyramid","text":"<pre><code>graph TB\n    subgraph Integration\n        I[Integration Tests]\n    end\n\n    subgraph Service\n        S[Service Tests]\n    end\n\n    subgraph Unit\n        U[Unit / HAL Tests]\n    end\n\n    I --&gt; S\n    S --&gt; U</code></pre>"},{"location":"testing/test-strategy/#layers","title":"Layers","text":"Layer Scope Mock? Unit HAL, drivers N/A (drivers are mocks) Service Business logic Yes (mock HAL) Integration End-to-end flows Yes"},{"location":"testing/test-strategy/#test-runner","title":"Test Runner","text":"<p>Single binary: <code>streaming_device_tests</code>. Runs:</p> <ul> <li>HAL tests (Display, Input, Storage)</li> <li>Service tests (App Launcher, UI, Config)</li> <li>HDMI-CEC tests</li> <li>Codec &amp; Container tests</li> <li>Bluetooth control tests</li> </ul>"}]}